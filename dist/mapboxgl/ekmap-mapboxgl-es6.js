/*!
 * 
 *          ekmap-mapboxgl.(https://ekgis.com.vn/)
 *          CopyrightÂ© 2009 - 2020 eKGIS
 *          license: Apache-2.0
 *          version: v0.0.1
 *         
 */
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/node-libs-browser/node_modules/events/events.js":
/*!**********************************************************************!*\
  !*** ./node_modules/node-libs-browser/node_modules/events/events.js ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function eventListener() {\n      if (errorListener !== undefined) {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n    var errorListener;\n\n    // Adding an error listener is not optional because\n    // if an error is thrown on an event emitter we cannot\n    // guarantee that the actual event we are waiting will\n    // be fired. The result could be a silent way to create\n    // memory or file descriptor leaks, which is something\n    // we should avoid.\n    if (name !== 'error') {\n      errorListener = function errorListener(err) {\n        emitter.removeListener(name, eventListener);\n        reject(err);\n      };\n\n      emitter.once('error', errorListener);\n    }\n\n    emitter.once(name, eventListener);\n  });\n}\n\n\n//# sourceURL=webpack:///./node_modules/node-libs-browser/node_modules/events/events.js?");

/***/ }),

/***/ "./src/mapboxgl/control/FeatureInfomation.js":
/*!***************************************************!*\
  !*** ./src/mapboxgl/control/FeatureInfomation.js ***!
  \***************************************************/
/*! exports provided: FeatureInfomation */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FeatureInfomation\", function() { return FeatureInfomation; });\n/* harmony import */ var _services_MapService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../services/MapService */ \"./src/mapboxgl/services/MapService.js\");\n/* harmony import */ var _core_Base__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/Base */ \"./src/mapboxgl/core/Base.js\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! mapbox-gl */ \"mapbox-gl\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(mapbox_gl__WEBPACK_IMPORTED_MODULE_2__);\n\r\n\r\n\r\n\r\n/**\r\n * @class mapboxgl.ekmap.control.FeatureInfomation\r\n * @category  Control\r\n * @classdesc FeatureInfomation.\r\n * @example\r\n * (start code)\r\n *  map.addControl(new mapboxgl.ekmap.control.FeatureInfomation(),'bottom-right');\r\n * (end)\r\n */\r\n\r\nclass FeatureInfomation extends mapbox_gl__WEBPACK_IMPORTED_MODULE_2___default.a.Evented {\r\n\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    /**\r\n     * @function mapboxgl.ekmap.control.FeatureInfomation.prototype.onAdd\r\n     * @description Register a control on the map and give it a chance to register event listeners and resources. This method is called by Map#addControl internally.\r\n     * @param {Map} map the Map this control will be added to.\r\n     * @returns {HTMLElement}  The control's container element. This should be created by the control and returned by onAdd without being attached to the DOM: the map will insert the control's element into the DOM as necessary.\r\n     */\r\n    onAdd(map) {\r\n        this._map = map;\r\n        this._container = document.createElement('div');\r\n        this._container.className = 'mapboxgl-ctrl';\r\n        return this._container;\r\n    }\r\n\r\n    /**\r\n     * @function mapboxgl.ekmap.control.FeatureInfomation.prototype.onRemove\r\n     * @description Unregister a control on the map and give it a chance to detach event listeners and resources. This method is called by Map#removeControl internally.\r\n     * @param {Map} map the Map this control will be removed from.\r\n     * @returns {undefined}  there is no required return value for this method.\r\n     */\r\n    onRemove() {\r\n        this._container.parentNode.removeChild(this._container);\r\n        this._map = undefined;\r\n    }\r\n\r\n    removeLayer(map) {\r\n        if (map) {\r\n            if (map.getLayer('point')) {\r\n                map.removeLayer('point');\r\n                map.removeSource('point');\r\n            }\r\n            if (map.getLayer('line')) {\r\n                map.removeLayer('line');\r\n                map.removeSource('line');\r\n            }\r\n            if (map.getLayer('area')) {\r\n                map.removeLayer('area');\r\n                map.removeSource('area');\r\n            }\r\n        }\r\n    }\r\n\r\n    on(event, callback) {\r\n        var me = this;\r\n        if (event == 'selectfeature') {\r\n            this._map.on('click', function (e) {\r\n                me.removeLayer(me._map);\r\n                var cooor = [e.lngLat.lng, e.lngLat.lat];\r\n                var geojson = {\r\n                    'type': 'FeatureCollection',\r\n                    'features': [\r\n                        {\r\n                            'type': 'Feature',\r\n                            'geometry': {\r\n                                'type': 'Point',\r\n                                'coordinates': cooor\r\n                            }\r\n                        }\r\n                    ]\r\n                };\r\n                var layers = me._map.getStyle().layers;\r\n                layers.forEach(layer => {\r\n                    if (layer.metadata && layer.metadata.type == 'overlayer' && layer.layout.visibility === \"visible\") {\r\n                        var mapService = new mapbox_gl__WEBPACK_IMPORTED_MODULE_2___default.a.ekmap.MapService({\r\n                            url: layer.metadata.url,\r\n                            token: layer.metadata.token\r\n                        });\r\n                        mapService.identify().on(me._map).at(e.lngLat).run(function (obj) {\r\n                            if (obj.length > 0) {\r\n                                for (var i = 0; i < obj.length; i++) {\r\n                                    //Point\r\n                                    if (obj[i].geometryType == 'esriGeometryPoint') {\r\n                                        if (!me._map.getLayer('point')) { \r\n                                            me._map.addSource('point', {\r\n                                                'type': 'geojson',\r\n                                                'data': geojson\r\n                                            });\r\n                                            me._map.addLayer({\r\n                                                'id': 'point',\r\n                                                'type': 'circle',\r\n                                                'source': 'point',\r\n                                                'paint': {\r\n                                                    'circle-radius': 10,\r\n                                                    'circle-color': '#0000ff'\r\n                                                }\r\n                                            });\r\n                                        } else {\r\n                                            me._map.removeLayer('point');\r\n                                            me._map.removeSource('point');\r\n                                            me._map.addSource('point', {\r\n                                                'type': 'geojson',\r\n                                                'data': geojson\r\n                                            });\r\n\r\n                                            me._map.addLayer({\r\n                                                'id': 'point',\r\n                                                'type': 'circle',\r\n                                                'source': 'point',\r\n                                                'paint': {\r\n                                                    'circle-radius': 10,\r\n                                                    'circle-color': '#0000ff'\r\n                                                }\r\n                                            });\r\n                                        }\r\n                                    }\r\n                                    //Polygon\r\n                                    else {\r\n                                        var coordinates;\r\n                                        if (obj[i].geometry.paths)\r\n                                            coordinates = obj[i].geometry.paths[0];\r\n                                        else\r\n                                            coordinates = obj[i].geometry.rings[0];\r\n                                        //Polyline\r\n                                        if (obj[i].geometryType == 'esriGeometryPolyline') {\r\n                                            if (!me._map.getLayer('line')) {\r\n                                                me._map.addSource('line', {\r\n                                                    'type': 'geojson',\r\n                                                    'data': {\r\n                                                        'type': 'Feature',\r\n                                                        'properties': {},\r\n                                                        'geometry': {\r\n                                                            'type': 'LineString',\r\n                                                            'coordinates': coordinates\r\n                                                        }\r\n                                                    }\r\n                                                });\r\n                                                me._map.addLayer({\r\n                                                    'id': 'line',\r\n                                                    'type': 'line',\r\n                                                    'source': 'line',\r\n                                                    'layout': {\r\n                                                        'line-join': 'round',\r\n                                                        'line-cap': 'round'\r\n                                                    },\r\n                                                    'paint': {\r\n                                                        'line-color': '#000',\r\n                                                        'line-width': 5\r\n                                                    }\r\n                                                });\r\n                                            } else {\r\n                                                me._map.removeLayer('line');\r\n                                                me._map.removeSource('line');\r\n                                                me._map.addSource('line', {\r\n                                                    'type': 'geojson',\r\n                                                    'data': {\r\n                                                        'type': 'Feature',\r\n                                                        'properties': {},\r\n                                                        'geometry': {\r\n                                                            'type': 'LineString',\r\n                                                            'coordinates': coordinates\r\n                                                        }\r\n                                                    }\r\n                                                });\r\n                                                me._map.addLayer({\r\n                                                    'id': 'line',\r\n                                                    'type': 'line',\r\n                                                    'source': 'line',\r\n                                                    'layout': {\r\n                                                        'line-join': 'round',\r\n                                                        'line-cap': 'round'\r\n                                                    },\r\n                                                    'paint': {\r\n                                                        'line-color': '#000',\r\n                                                        'line-width': 5\r\n                                                    }\r\n                                                });\r\n                                            }\r\n                                        }\r\n                                        //Area\r\n                                        else {\r\n                                            if (!me._map.getLayer('area')) {\r\n                                                me._map.addSource('area', {\r\n                                                    'type': 'geojson',\r\n                                                    lineMetrics: true,\r\n                                                    'data': {\r\n                                                        'type': 'Feature',\r\n                                                        'properties': {},\r\n                                                        'geometry': {\r\n                                                            'type': 'LineString',\r\n                                                            'coordinates': coordinates\r\n                                                        }\r\n                                                    }\r\n                                                });\r\n                                                me._map.addLayer({\r\n                                                    //line path\r\n                                                    'id': 'area',\r\n                                                    'type': 'line',\r\n                                                    'source': 'area',\r\n                                                    'layout': {\r\n                                                        'line-join': 'round',\r\n                                                        'line-cap': 'round'\r\n                                                    },\r\n                                                    'paint': {\r\n                                                        'line-color': '#90c258',\r\n                                                        'line-width': 5,\r\n                                                        'line-gradient': [\r\n                                                            'interpolate',\r\n                                                            ['linear'],\r\n                                                            ['line-progress'],\r\n                                                            0,\r\n                                                            'blue',\r\n                                                            0.1,\r\n                                                            'royalblue',\r\n                                                            0.3,\r\n                                                            'cyan',\r\n                                                            0.5,\r\n                                                            'lime',\r\n                                                            0.7,\r\n                                                            'yellow',\r\n                                                            1,\r\n                                                            'red'\r\n                                                        ],\r\n                                                    }\r\n                                                    //fill path\r\n                                                    //'id': 'area',\r\n                                                    //'type': 'fill',\r\n                                                    //'source': 'area',\r\n                                                    //'layout': {\r\n                                                    //},\r\n                                                    //'paint': {\r\n                                                    //    'fill-outline-color': '#484896',\r\n                                                    //    'fill-color': '#6e599f',\r\n                                                    //    'fill-opacity': 0.75\r\n                                                    //},\r\n                                                });\r\n                                            } else {\r\n                                                me._map.removeLayer('area');\r\n                                                me._map.removeSource('area');\r\n                                                me._map.addSource('area', {\r\n                                                    'type': 'geojson',\r\n                                                    'data': {\r\n                                                        'type': 'Feature',\r\n                                                        'properties': {},\r\n                                                        'geometry': {\r\n                                                            'type': 'LineString',\r\n                                                            'coordinates': coordinates\r\n                                                        }\r\n                                                    }\r\n                                                });\r\n                                                me._map.addLayer({\r\n                                                    'id': 'area',\r\n                                                    'type': 'line',\r\n                                                    'source': 'area',\r\n                                                    'layout': {\r\n                                                        'line-join': 'round',\r\n                                                        'line-cap': 'round'\r\n                                                    },\r\n                                                    'paint': {\r\n                                                        'line-color': '#90c258',\r\n                                                        'line-width': 5,\r\n                                                        'line-gradient': [\r\n                                                            'interpolate',\r\n                                                            ['linear'],\r\n                                                            ['line-progress'],\r\n                                                            0,\r\n                                                            'blue',\r\n                                                            0.1,\r\n                                                            'royalblue',\r\n                                                            0.3,\r\n                                                            'cyan',\r\n                                                            0.5,\r\n                                                            'lime',\r\n                                                            0.7,\r\n                                                            'yellow',\r\n                                                            1,\r\n                                                            'red'\r\n                                                        ],\r\n                                                    }\r\n                                                });\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                    if (me._map.getLayer('point') && me._map.getLayer('line'))\r\n                                        me._map.moveLayer('line', 'point');\r\n                                }\r\n                                obj.coordinate = e.lngLat;\r\n                            }\r\n                            else {\r\n                                me.removeLayer(me._map);\r\n                            }\r\n                            callback(obj);\r\n                        }, \"\");\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nmapbox_gl__WEBPACK_IMPORTED_MODULE_2___default.a.ekmap.control.FeatureInfomation = FeatureInfomation;\r\n\n\n//# sourceURL=webpack:///./src/mapboxgl/control/FeatureInfomation.js?");

/***/ }),

/***/ "./src/mapboxgl/control/Legend.js":
/*!****************************************!*\
  !*** ./src/mapboxgl/control/Legend.js ***!
  \****************************************/
/*! exports provided: Legend */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Legend\", function() { return Legend; });\n/* harmony import */ var _core_Base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/Base */ \"./src/mapboxgl/core/Base.js\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! mapbox-gl */ \"mapbox-gl\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(mapbox_gl__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _core_Util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/Util */ \"./src/mapboxgl/core/Util.js\");\n\r\n\r\n\r\n/**\r\n * @class mapboxgl.ekmap.control.Legend\r\n * @category  Control\r\n * @classdesc Legend.\r\n *\r\n * @example\r\n *  var map = new mapboxgl.Map({\r\n *      //config....\r\n *  });\r\n *  var tiledMap = new mapboxgl.ekmap.TiledMapLayer({\r\n *       url: 'http://s2.cloudgis.vn/arcgis/rest/services/GIS/DuongSat/MapServer'\r\n *  }).addTo(map);\r\n *  var legend = new mapboxgl.ekmap.control.Legend([tiledMap]);\r\n *  map.addControl(legend,\"top-left\");\r\n */\r\nclass Legend extends mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default.a.Evented {\r\n\r\n    constructor(layers) {\r\n        super(layers);\r\n        this.layers = _core_Util__WEBPACK_IMPORTED_MODULE_2__[\"Util\"].isArray(layers)? layers : [layers];\r\n    }\r\n\r\n    /**\r\n     * @function mapboxgl.ekmap.control.Legend.prototype.onAdd\r\n     * @description Register a control on the map and give it a chance to register event listeners and resources. This method is called by Map#addControl internally.\r\n     * @param {Map} map the Map this control will be added to.\r\n     * @returns {HTMLElement}  The control's container element. This should be created by the control and returned by onAdd without being attached to the DOM: the map will insert the control's element into the DOM as necessary.\r\n     */\r\n    onAdd(map) {\r\n        this._map = map;\r\n        let me = this; //might use this later\r\n\r\n        this.button = document.createElement(\"button\");\r\n        let icon = document.createElement(\"i\");\r\n        icon.className = \"fa fa-bars\";\r\n        this.button.className = \"mapboxgl-ctrl-zoom-in\"\r\n        this.button.appendChild(icon);\r\n        this.button.addEventListener(\"click\", function (e) {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            if (me._panel) {\r\n                me._div.removeChild(me._panel);\r\n            }\r\n            me.button.style.display = \"none\";\r\n            me._panel = me.createLayerInputToggle();\r\n            me._div.appendChild(me._panel);\r\n        })\r\n\r\n        this._div = document.createElement('div');\r\n        this._div.setAttribute(\"id\", \"container\");\r\n        me._div.style.overflow = \"auto\";\r\n        me._div.style.overflowX = \"hidden\";\r\n        me._div.style.fontSize = \"14px\";\r\n        me._div.style.background = \"#fff\";\r\n        this._div.className = 'mapboxgl-ctrl mapboxgl-ctrl-group';\r\n        //this._div.style.padding = \"8px\";\r\n        $(document).click((event) => {\r\n            if (!$(event.target).closest('#container').length) {\r\n                me.close();\r\n            }\r\n        });\r\n        this._div.appendChild(this.button);\r\n        return this._div;\r\n    }\r\n\r\n    /**\r\n     * @function mapboxgl.ekmap.control.Legend.prototype.onRemove\r\n     * @description Unregister a control on the map and give it a chance to detach event listeners and resources. This method is called by Map#removeControl internally.\r\n     * @param {Map} map the Map this control will be removed from.\r\n     * @returns {undefined}  there is no required return value for this method.\r\n     */\r\n    onRemove(map) {\r\n        this._map = map;\r\n        this._div.parentNode.removeChild(this._div);\r\n        this._map = undefined;\r\n    }\r\n\r\n\r\n    /**\r\n    * @private\r\n    * @description Create layer input\r\n    */\r\n    createLayerInputToggle() {\r\n        var me = this;\r\n        var div = document.createElement(\"div\");\r\n        div.style.maxHeight = \"300px\";\r\n        div.style.padding = \"1rem\";\r\n        this.closeButton = document.createElement('a');\r\n        this.closeButton.style.position = 'absolute';\r\n        this.closeButton.style.top = '0';\r\n        this.closeButton.style.right = '0';\r\n        this.imgClose = document.createElement('img');\r\n        this.imgClose.setAttribute(\"src\", \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEUAAACCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4OCg4MVktI5AAAAMnRSTlMAAQIDBAUGBwgJCg0ODxARJXV7hYiLj5GUmJ6go6aqsrS1w8XIytHT19nc4ubo6ev5+yWLQbAAAABzSURBVBgZncFHEoJAAATA2YBgFhQTBpBkAnX+/zjZpSiult34xeasYfmFgnHkRaOx5EvBkAlTDaxYz9CSMTMvZDVFR8b88DlBz3mTC/TEnuR1iI448DaPeB+hJU8sXIgdH2NYEfMBGmtWCsY2cWAFpcI/vj+FCU1mGENhAAAAAElFTkSuQmCC\");\r\n        this.imgClose.style.padding = '5px';\r\n        this.imgClose.style.cursor = 'pointer';\r\n        this.closeButton.appendChild(this.imgClose);\r\n        div.appendChild(this.closeButton);\r\n        this.closeButton.addEventListener(\"click\", event => {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            me.close();\r\n        })\r\n        var ul = document.createElement(\"ul\");\r\n        ul.style.padding = \"10px\";\r\n        ul.style.margin = \"0\";\r\n        ul.style.listStyleType = \"none\"\r\n        this.layers.forEach(layer => {\r\n            layer.legend(function (list) {\r\n                var listLenged = list.layers.slice();\r\n                for (var i = 0; i < listLenged.length; i++) {\r\n                    var li = document.createElement(\"li\");\r\n                    var strong = document.createElement(\"strong\");\r\n                    strong.innerHTML = listLenged[i].layerName;\r\n                    li.appendChild(strong);\r\n                    for (var j = 0; j < listLenged[i].legend.length; j++) {\r\n                        var img = document.createElement(\"img\");\r\n                        img.width = 13;\r\n                        img.height = 13;\r\n                        img.src = \"data:image/png;base64,\" + listLenged[i].legend[j].imageData;\r\n                        var span = document.createElement(\"span\");\r\n                        span.innerHTML = listLenged[i].legend[j].label;\r\n                        span.style.paddingLeft = '15px';\r\n                        var li1 = document.createElement(\"li\");\r\n                        li1.appendChild(img);\r\n                        li1.appendChild(span);\r\n                        var ul1 = document.createElement(\"ul\");\r\n                        ul1.style.padding = \"0\";\r\n                        ul1.style.margin = \"0\";\r\n                        ul1.style.listStyleType = \"none\";\r\n                        ul1.style.marginLeft = \"15px\";\r\n                        ul1.appendChild(li1);\r\n                        li.appendChild(ul1);\r\n                        ul.appendChild(li);\r\n                        div.appendChild(ul);\r\n                    }\r\n                }\r\n            })\r\n        })\r\n        return div;\r\n    }\r\n\r\n    close() {\r\n        if (this._panel) {\r\n            this._div.removeChild(this._panel);\r\n            this._panel = null;\r\n        }\r\n        this.button.style.display = \"\";\r\n    }\r\n}\r\n\r\nmapbox_gl__WEBPACK_IMPORTED_MODULE_1___default.a.ekmap.control.Legend = Legend;\r\n\n\n//# sourceURL=webpack:///./src/mapboxgl/control/Legend.js?");

/***/ }),

/***/ "./src/mapboxgl/control/SnapShot.js":
/*!******************************************!*\
  !*** ./src/mapboxgl/control/SnapShot.js ***!
  \******************************************/
/*! exports provided: SnapShot */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SnapShot\", function() { return SnapShot; });\n/* harmony import */ var _core_Base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/Base */ \"./src/mapboxgl/core/Base.js\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! mapbox-gl */ \"mapbox-gl\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(mapbox_gl__WEBPACK_IMPORTED_MODULE_1__);\n\r\n\r\n\r\n/**\r\n * @class mapboxgl.ekmap.control.SnapShot\r\n * @category  Control\r\n * @classdesc SnapShot.\r\n *\r\n * @example\r\n *  var map = new mapboxgl.Map({\r\n *      //config....\r\n *  })\r\n *  map.addControl(new mapboxgl.ekmap.control.SnapShot(),'bottom-right');\r\n */\r\nclass SnapShot extends mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default.a.Evented {\r\n\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    /**\r\n     * @function mapboxgl.ekmap.control.SnapShot.prototype.onAdd\r\n     * @description Register a control on the map and give it a chance to register event listeners and resources. This method is called by Map#addControl internally.\r\n     * @param {Map} map the Map this control will be added to.\r\n     * @returns {HTMLElement}  The control's container element. This should be created by the control and returned by onAdd without being attached to the DOM: the map will insert the control's element into the DOM as necessary.\r\n     */\r\n    onAdd(map) {\r\n        this._map = map;\r\n        let me = this; //might use this later\r\n        this._div = document.createElement('div');\r\n        this._div[\"aria-label\"] = \"Chá»¥p mÃ n hÃ¬nh\";\r\n        this._div.title = \"Chá»¥p mÃ n hÃ¬nh\";\r\n        this._div.className = 'mapboxgl-ctrl mapboxgl-ctrl-group';\r\n        //this._div.style.padding = \"8px\";\r\n        this._div.style.fontSize = \"14px\"\r\n\r\n        let input = this.createLayerInputToggle('Long', true, 'test', \"\");\r\n        this._div.appendChild(input)\r\n\r\n        this._div.addEventListener(\"click\", function (e) {\r\n            var nameImg = 'map_' + me.guid12() + '.png';\r\n            me._map.getCanvas().toBlob(function (blob) {\r\n                saveAs(blob, nameImg);\r\n            })\r\n        })\r\n        return this._div;\r\n    }\r\n\r\n    /**\r\n     * @function mapboxgl.ekmap.control.SnapShot.prototype.onRemove\r\n     * @description Unregister a control on the map and give it a chance to detach event listeners and resources. This method is called by Map#removeControl internally.\r\n     * @param {Map} map the Map this control will be removed from.\r\n     * @returns {undefined}  there is no required return value for this method.\r\n     */\r\n    onRemove(map) {\r\n        this._map = map;\r\n        this._div.parentNode.removeChild(this._div);\r\n        this._map = undefined;\r\n    }\r\n\r\n\r\n    /**\r\n    * @private\r\n    * @description Create layer input\r\n    */\r\n    createLayerInputToggle() {\r\n        let button = document.createElement(\"button\");\r\n        let icon = document.createElement(\"i\");\r\n        icon.className = \"fa fa-camera\";\r\n        button.className = \"mapboxgl-ctrl-zoom-in\"\r\n        button.appendChild(icon);\r\n        return button\r\n    }\r\n\r\n    /**\r\n    * @private\r\n    * @description Create id\r\n    */\r\n    guid12() {\r\n        function s4() {\r\n            return Math.floor((1 + Math.random()) * 0x10000)\r\n                .toString(16)\r\n                .substring(1);\r\n        }\r\n        return s4() + s4() + s4();\r\n    }\r\n\r\n}\r\n\r\nmapbox_gl__WEBPACK_IMPORTED_MODULE_1___default.a.ekmap.control.SnapShot = SnapShot;\r\n\n\n//# sourceURL=webpack:///./src/mapboxgl/control/SnapShot.js?");

/***/ }),

/***/ "./src/mapboxgl/control/Swipe.js":
/*!***************************************!*\
  !*** ./src/mapboxgl/control/Swipe.js ***!
  \***************************************/
/*! exports provided: Swipe */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Swipe\", function() { return Swipe; });\n/* harmony import */ var _core_Base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/Base */ \"./src/mapboxgl/core/Base.js\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! mapbox-gl */ \"mapbox-gl\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(mapbox_gl__WEBPACK_IMPORTED_MODULE_1__);\n\r\n\r\nvar EventEmitter = __webpack_require__(/*! events */ \"./node_modules/node-libs-browser/node_modules/events/events.js\").EventEmitter;\r\n\r\nclass Swipe extends mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default.a.Evented {\r\n    constructor(a, b, container, options) {\r\n        super();\r\n        this.options = options ? options : {};\r\n        this._mapA = a;\r\n        this._mapB = b;\r\n        this._horizontal = this.options.orientation === 'horizontal';\r\n        this._onDown = this._onDown.bind(this);\r\n        this._onMove = this._onMove.bind(this);\r\n        this._onMouseUp = this._onMouseUp.bind(this);\r\n        this._onTouchEnd = this._onTouchEnd.bind(this);\r\n        this._ev = new EventEmitter();\r\n        this._swiper = document.createElement('div');\r\n        this._swiper.className = this._horizontal ? 'compare-swiper-horizontal' : 'compare-swiper-vertical';\r\n\r\n        this._controlContainer = document.createElement('div');\r\n        this._controlContainer.className = this._horizontal ? 'mapboxgl-compare mapboxgl-compare-horizontal' : 'mapboxgl-compare';\r\n        this._controlContainer.className = this._controlContainer.className;\r\n        this._controlContainer.appendChild(this._swiper);\r\n\r\n        if (typeof container === 'string' && document.body.querySelectorAll) {\r\n            // get container with a selector\r\n            var appendTarget = document.body.querySelectorAll(container)[0];\r\n            if (!appendTarget) {\r\n                throw new Error('Cannot find element with specified container selector.')\r\n            }\r\n            appendTarget.appendChild(this._controlContainer)\r\n        } else if (container instanceof Element && container.appendChild) {\r\n            // get container directly\r\n            container.appendChild(this._controlContainer)\r\n        } else {\r\n            throw new Error('Invalid container specified. Must be CSS selector or HTML element.')\r\n        }\r\n        this._bounds = b.getContainer().getBoundingClientRect();\r\n        var swiperPosition = (this._horizontal ? this._bounds.height : this._bounds.width) / 2;\r\n        this._setPosition(swiperPosition);\r\n        this._onResize = function () {\r\n            this._bounds = b.getContainer().getBoundingClientRect();\r\n            if (this.currentPosition) this._setPosition(this.currentPosition);\r\n        }.bind(this);\r\n\r\n        b.on('resize', this._onResize);\r\n\r\n        if (this.options && this.options.mousemove) {\r\n            a.getContainer().addEventListener('mousemove', this._onMove);\r\n            b.getContainer().addEventListener('mousemove', this._onMove);\r\n        }\r\n\r\n        this._swiper.addEventListener('mousedown', this._onDown);\r\n        this._swiper.addEventListener('touchstart', this._onDown);\r\n    }\r\n\r\n    _onDown(e) {\r\n        if (e.touches) {\r\n            document.addEventListener('touchmove', this._onMove);\r\n            document.addEventListener('touchend', this._onTouchEnd);\r\n        } else {\r\n            document.addEventListener('mousemove', this._onMove);\r\n            document.addEventListener('mouseup', this._onMouseUp);\r\n        }\r\n    }\r\n\r\n    _setPointerEvents(v) {\r\n        this._controlContainer.style.pointerEvents = v;\r\n        this._swiper.style.pointerEvents = v;\r\n    }\r\n\r\n    _setPosition(x) {\r\n        x = Math.min(x, this._horizontal\r\n            ? this._bounds.height\r\n            : this._bounds.width);\r\n        var pos = this._horizontal\r\n            ? 'translate(0, ' + x + 'px)'\r\n            : 'translate(' + x + 'px, 0)';\r\n        this._controlContainer.style.transform = pos;\r\n        this._controlContainer.style.WebkitTransform = pos;\r\n        var clipA = this._horizontal\r\n            ? 'rect(0, 999em, ' + x + 'px, 0)'\r\n            : 'rect(0, ' + x + 'px, ' + this._bounds.height + 'px, 0)';\r\n        var clipB = this._horizontal\r\n            ? 'rect(' + x + 'px, 999em, ' + this._bounds.height + 'px,0)'\r\n            : 'rect(0, 999em, ' + this._bounds.height + 'px,' + x + 'px)';\r\n\r\n        this._mapA.getContainer().style.clip = clipA;\r\n        this._mapB.getContainer().style.clip = clipB;\r\n        this.currentPosition = x;\r\n    }\r\n\r\n    _onMove(e) {\r\n        if (this.options && this.options.mousemove) {\r\n            this._setPointerEvents(e.touches ? 'auto' : 'none');\r\n        }\r\n\r\n        this._horizontal\r\n            ? this._setPosition(this._getY(e))\r\n            : this._setPosition(this._getX(e));\r\n    }\r\n\r\n    _onMouseUp() {\r\n        document.removeEventListener('mousemove', this._onMove);\r\n        document.removeEventListener('mouseup', this._onMouseUp);\r\n        this.fire('slideend', { currentPosition: this.currentPosition });\r\n    }\r\n\r\n    _onTouchEnd() {\r\n        document.removeEventListener('touchmove', this._onMove);\r\n        document.removeEventListener('touchend', this._onTouchEnd);\r\n        this.fire('slideend', { currentPosition: this.currentPosition });\r\n    }\r\n\r\n    _getX(e) {\r\n        e = e.touches ? e.touches[0] : e;\r\n        var x = e.clientX - this._bounds.left;\r\n        if (x < 0) x = 0;\r\n        if (x > this._bounds.width) x = this._bounds.width;\r\n        return x;\r\n    }\r\n\r\n    _getY(e) {\r\n        e = e.touches ? e.touches[0] : e;\r\n        var y = e.clientY - this._bounds.top;\r\n        if (y < 0) y = 0;\r\n        if (y > this._bounds.height) y = this._bounds.height;\r\n        return y;\r\n    }\r\n\r\n\r\n    setSlider(x) {\r\n        this._setPosition(x);\r\n    }\r\n    on(type, fn) {\r\n        this._ev.on(type, fn);\r\n        return this;\r\n    }\r\n\r\n\r\n    fire(type, data) {\r\n        this._ev.emit(type, data);\r\n        return this;\r\n    }\r\n\r\n    off(type, fn) {\r\n        this._ev.removeListener(type, fn);\r\n        return this;\r\n    }\r\n\r\n    remove() {\r\n        this._clearSync();\r\n        this._mapB.off('resize', this._onResize);\r\n        var aContainer = this._mapA.getContainer();\r\n\r\n        if (!!aContainer) {\r\n            aContainer.style.clip = null;\r\n            aContainer.removeEventListener('mousemove', this._onMove);\r\n        }\r\n\r\n        var bContainer = this._mapB.getContainer();\r\n\r\n        if (!!bContainer) {\r\n            bContainer.style.clip = null;\r\n            bContainer.removeEventListener('mousemove', this._onMove);\r\n        }\r\n\r\n        this._swiper.removeEventListener('mousedown', this._onDown);\r\n        this._swiper.removeEventListener('touchstart', this._onDown);\r\n        this._controlContainer.remove();\r\n    }\r\n}\r\n\r\nmapbox_gl__WEBPACK_IMPORTED_MODULE_1___default.a.ekmap.control.Swipe = Swipe;\r\n\n\n//# sourceURL=webpack:///./src/mapboxgl/control/Swipe.js?");

/***/ }),

/***/ "./src/mapboxgl/control/index.js":
/*!***************************************!*\
  !*** ./src/mapboxgl/control/index.js ***!
  \***************************************/
/*! exports provided: SnapShot, Swipe, FeatureInfomation, Legend */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _SnapShot__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SnapShot */ \"./src/mapboxgl/control/SnapShot.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"SnapShot\", function() { return _SnapShot__WEBPACK_IMPORTED_MODULE_0__[\"SnapShot\"]; });\n\n/* harmony import */ var _Swipe__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Swipe */ \"./src/mapboxgl/control/Swipe.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Swipe\", function() { return _Swipe__WEBPACK_IMPORTED_MODULE_1__[\"Swipe\"]; });\n\n/* harmony import */ var _FeatureInfomation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./FeatureInfomation */ \"./src/mapboxgl/control/FeatureInfomation.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"FeatureInfomation\", function() { return _FeatureInfomation__WEBPACK_IMPORTED_MODULE_2__[\"FeatureInfomation\"]; });\n\n/* harmony import */ var _Legend__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Legend */ \"./src/mapboxgl/control/Legend.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Legend\", function() { return _Legend__WEBPACK_IMPORTED_MODULE_3__[\"Legend\"]; });\n\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n//# sourceURL=webpack:///./src/mapboxgl/control/index.js?");

/***/ }),

/***/ "./src/mapboxgl/core/Base.js":
/*!***********************************!*\
  !*** ./src/mapboxgl/core/Base.js ***!
  \***********************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mapbox-gl */ \"mapbox-gl\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mapbox_gl__WEBPACK_IMPORTED_MODULE_0__);\n/**\r\n * @namespace mapboxgl\r\n * @category BaseType Namespace\r\n */\r\n/**\r\n * @namespace mapboxgl.ekmap\r\n * @category BaseType Namespace\r\n */\r\n\r\n/**\r\n * @namespace mapboxgl.ekmap.control\r\n * @category BaseType Namespace\r\n */\r\n\r\n\r\n//thay Äá»i ná»i dung\r\nmapbox_gl__WEBPACK_IMPORTED_MODULE_0___default.a.ekmap = mapbox_gl__WEBPACK_IMPORTED_MODULE_0___default.a.ekmap || {};\r\n\r\nmapbox_gl__WEBPACK_IMPORTED_MODULE_0___default.a.ekmap.control = mapbox_gl__WEBPACK_IMPORTED_MODULE_0___default.a.ekmap.control || {};\r\n\r\n\n\n//# sourceURL=webpack:///./src/mapboxgl/core/Base.js?");

/***/ }),

/***/ "./src/mapboxgl/core/Parse.js":
/*!************************************!*\
  !*** ./src/mapboxgl/core/Parse.js ***!
  \************************************/
/*! exports provided: Parse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Parse\", function() { return Parse; });\nclass Parse {\r\n    static arcgisToGeoJSON(arcgis, idAttribute) {\r\n        var geojson = {};\r\n\r\n        if (arcgis.features) {\r\n            geojson.type = 'FeatureCollection';\r\n            geojson.features = [];\r\n            for (var i = 0; i < arcgis.features.length; i++) {\r\n                geojson.features.push(arcgisToGeoJSON(arcgis.features[i], idAttribute));\r\n            }\r\n        }\r\n\r\n        if (typeof arcgis.x === 'number' && typeof arcgis.y === 'number') {\r\n            geojson.type = 'Point';\r\n            geojson.coordinates = [arcgis.x, arcgis.y];\r\n            if (typeof arcgis.z === 'number') {\r\n                geojson.coordinates.push(arcgis.z);\r\n            }\r\n        }\r\n\r\n        if (arcgis.points) {\r\n            geojson.type = 'MultiPoint';\r\n            geojson.coordinates = arcgis.points.slice(0);\r\n        }\r\n\r\n        if (arcgis.paths) {\r\n            if (arcgis.paths.length === 1) {\r\n                geojson.type = 'LineString';\r\n                geojson.coordinates = arcgis.paths[0].slice(0);\r\n            } else {\r\n                geojson.type = 'MultiLineString';\r\n                geojson.coordinates = arcgis.paths.slice(0);\r\n            }\r\n        }\r\n\r\n        if (arcgis.rings) {\r\n            geojson = convertRingsToGeoJSON(arcgis.rings.slice(0));\r\n        }\r\n\r\n        if (\r\n            typeof arcgis.xmin === 'number' &&\r\n            typeof arcgis.ymin === 'number' &&\r\n            typeof arcgis.xmax === 'number' &&\r\n            typeof arcgis.ymax === 'number'\r\n        ) {\r\n            geojson.type = 'Polygon';\r\n            geojson.coordinates = [[\r\n                [arcgis.xmax, arcgis.ymax],\r\n                [arcgis.xmin, arcgis.ymax],\r\n                [arcgis.xmin, arcgis.ymin],\r\n                [arcgis.xmax, arcgis.ymin],\r\n                [arcgis.xmax, arcgis.ymax]\r\n            ]];\r\n        }\r\n\r\n        if (arcgis.geometry || arcgis.attributes) {\r\n            geojson.type = 'Feature';\r\n            geojson.geometry = (arcgis.geometry) ? arcgisToGeoJSON(arcgis.geometry) : null;\r\n            geojson.properties = (arcgis.attributes) ? shallowClone(arcgis.attributes) : null;\r\n            if (arcgis.attributes) {\r\n                try {\r\n                    geojson.id = getId(arcgis.attributes, idAttribute);\r\n                } catch (err) {\r\n                    // don't set an id\r\n                }\r\n            }\r\n        }\r\n\r\n        // if no valid geometry was encountered\r\n        if (JSON.stringify(geojson.geometry) === JSON.stringify({})) {\r\n            geojson.geometry = null;\r\n        }\r\n\r\n        if (\r\n            arcgis.spatialReference &&\r\n            arcgis.spatialReference.wkid &&\r\n            arcgis.spatialReference.wkid !== 4326\r\n        ) {\r\n            console.warn('Object converted in non-standard crs - ' + JSON.stringify(arcgis.spatialReference));\r\n        }\r\n\r\n        return geojson;\r\n    }\r\n\r\n    static geojsonToArcGIS(geojson, idAttribute) {\r\n        idAttribute = idAttribute || 'OBJECTID';\r\n        var spatialReference = { wkid: 4326 };\r\n        var result = {};\r\n        var i;\r\n        var geojson = geojson;\r\n        switch (geojson.type) {\r\n            case 'Point':\r\n                result.x = geojson.coordinates[0];\r\n                result.y = geojson.coordinates[1];\r\n                result.spatialReference = spatialReference;\r\n                break;\r\n            case 'MultiPoint':\r\n                result.points = geojson.coordinates.slice(0);\r\n                result.spatialReference = spatialReference;\r\n                break;\r\n            case 'LineString':\r\n                result.paths = [geojson.coordinates.slice(0)];\r\n                result.spatialReference = spatialReference;\r\n                break;\r\n            case 'MultiLineString':\r\n                result.paths = geojson.coordinates.slice(0);\r\n                result.spatialReference = spatialReference;\r\n                break;\r\n            case 'Polygon':\r\n                result.rings = orientRings(geojson.coordinates.slice(0));\r\n                result.spatialReference = spatialReference;\r\n                break;\r\n            case 'MultiPolygon':\r\n                result.rings = flattenMultiPolygonRings(geojson.coordinates.slice(0));\r\n                result.spatialReference = spatialReference;\r\n                break;\r\n            case 'Feature':\r\n                if (geojson.geometry && geojson.geometry.type != 'Polyline') {\r\n                    result.geometry = this.geojsonToArcGIS(geojson.geometry, idAttribute);\r\n                }\r\n                if (geojson.properties) \r\n                    result.attributes = (geojson.properties) ? this.shallowClone(geojson.properties) : {};\r\n                //if (geojson.id)\r\n                //    result.attributes[idAttribute] = geojson.id;\r\n                break;\r\n            case 'FeatureCollection':\r\n                result = [];\r\n                for (i = 0; i < geojson.features.length; i++) {\r\n                    result.push(this.geojsonToArcGIS(geojson.features[i], idAttribute));\r\n                }\r\n                break;\r\n            case 'GeometryCollection':\r\n                result = [];\r\n                for (i = 0; i < geojson.geometries.length; i++) {\r\n                    result.push(geojsonToArcGIS(geojson.geometries[i], idAttribute));\r\n                }\r\n                break;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    static shallowClone(obj) {\r\n        var target = {};\r\n        for (var i in obj) {\r\n            if (obj.hasOwnProperty(i)) {\r\n                target[i] = obj[i];\r\n            }\r\n        }\r\n        return target;\r\n    }\r\n}\r\n\r\nmapboxgl.ekmap.Parse = Parse;\r\n\n\n//# sourceURL=webpack:///./src/mapboxgl/core/Parse.js?");

/***/ }),

/***/ "./src/mapboxgl/core/Request.js":
/*!**************************************!*\
  !*** ./src/mapboxgl/core/Request.js ***!
  \**************************************/
/*! exports provided: Request */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Request\", function() { return Request; });\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mapbox-gl */ \"mapbox-gl\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mapbox_gl__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _core_Base__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/Base */ \"./src/mapboxgl/core/Base.js\");\n\r\n\r\n\r\nclass Request {\r\n    static send(url, data, options, callback) {\r\n        options = options || {};\r\n        var self = this;\r\n        // Url\r\n        var encode = (options.encode !== false)\r\n        if (encode) url = encodeURI(url);\r\n        // New request\r\n        var ajax = new XMLHttpRequest();\r\n        ajax.open(\"GET\", url, true);\r\n        if (options.header) {\r\n            for (var header in options.header) {\r\n                ajax.setRequestHeader(header, options.header[header]);\r\n            }\r\n        }\r\n        // Load complete\r\n        //this.dispatchEvent({ type: 'loadstart' });\r\n        ajax.onload = function () {\r\n            // self._request = null;\r\n            // self.dispatchEvent({ type: 'loadend' });\r\n            if (this.status >= 200 && this.status < 400) {\r\n                var response;\r\n                // Decode response\r\n                try {\r\n                    response = JSON.parse(this.response);\r\n                    if (response.features) {\r\n                        callback(response.features);\r\n                    }\r\n                    if (response.results) {\r\n                        callback(response.results);\r\n                    }\r\n                    if (response.layers) {\r\n                        callback(response);\r\n                    }\r\n                    if (response.objectIdFieldName) {\r\n                        callback(response)\r\n                    }\r\n                } catch (e) {\r\n\r\n                }\r\n            } else {\r\n            }\r\n        };\r\n\r\n        // Oops\r\n        ajax.onerror = function () {\r\n        };\r\n        // GO!\r\n        if (data)\r\n            ajax.send(JSON.stringify(data));\r\n        else\r\n            ajax.send();\r\n    };\r\n\r\n    /** PhÆ°Æ¡ng thá»©c GET\r\n     * @param {*} options\r\n     *  @param {string} options.url\r\n     *  @param {string} options.auth XÃ¡c thá»±c náº¿u cáº§n, dáº¡ng btoa(\"username:password\");\r\n     *  @param {string} options.dataType Loáº¡i dá»¯ liá»u tráº£ vá», máº·c Äá»nh JSON\r\n     *  @param {string} options.success HÃ m callback khi success\r\n     *  @param {string} options.error HÃ m callback khi error\r\n     */\r\n    get(options) {\r\n        var ajax = new gclient_ajax(options);\r\n        if (options.success) ajax.on('success', function (e) { options.success(e.response, e); });\r\n        if (options.error) ajax.on('error', function (e) { options.error(e); });\r\n        ajax.send(options.url, options.data, options.options);\r\n    };\r\n\r\n    /** PhÆ°Æ¡ng thá»©c POST\r\n     * @param {*} options\r\n     *  @param {string} options.url\r\n     *  @param {string} options.auth XÃ¡c thá»±c náº¿u cáº§n, dáº¡ng btoa(\"username:password\");\r\n     *  @param {string} options.dataType Loáº¡i dá»¯ liá»u tráº£ vá», máº·c Äá»nh JSON\r\n     *  @param {string} options.data Dá»¯ liá»u POST lÃªn\r\n     *  @param {string} options.success HÃ m callback khi success\r\n     *  @param {string} options.error HÃ m callback khi error\r\n     */\r\n    static post(url, data, options, callback) {\r\n        options = options || {};\r\n        var encode = (options.encode !== false)\r\n        if (encode) url = encodeURI(url);\r\n        if (data.adds || data.updates || data.deletes) {\r\n            var dataPost = new FormData();\r\n            dataPost.append(\"f\", \"json\");\r\n            dataPost.append(\"adds\", data.adds);\r\n            dataPost.append(\"updates\", data.updates);\r\n            dataPost.append(\"deletes\", data.deletes);\r\n            if (options.token) dataPost.append(\"token\", options.token)\r\n        }else{\r\n            if (isNaN(data % 2)) {\r\n                var dataPost = new FormData();\r\n                dataPost.append(\"f\", \"json\");\r\n                dataPost.append(\"features\", data);\r\n                if (options.token) dataPost.append(\"token\", options.token)\r\n            } else {\r\n                var dataPost = new FormData();\r\n                dataPost.append(\"f\", \"json\");\r\n                dataPost.append(\"objectIds\", data)\r\n                if (options.token) dataPost.append(\"token\", options.token)\r\n            }\r\n        }\r\n        var ajax = new XMLHttpRequest();\r\n        ajax.open(\"POST\", url, false);\r\n        if (options.header) {\r\n            for (var header in options.header) {\r\n                ajax.setRequestHeader(\"Content-Type\", options.header[header]);\r\n            }\r\n        }\r\n        // Load complete\r\n        ajax.onload = function () {\r\n            // self._request = null;\r\n            // self.dispatchEvent({ type: 'loadend' });\r\n            if (this.status >= 200 && this.status < 400) {\r\n                var response;\r\n                // Decode response\r\n                try {\r\n                    response = JSON.parse(this.response);\r\n                    if(response.addResults && response.updateResults && response.deleteResults)\r\n                        callback(response)\r\n                    else{\r\n                        if (response.addResults) \r\n                            callback(response.addResults)\r\n                        if (response.updateResults) \r\n                            callback(response.updateResults)\r\n                        if (response.deleteResults) \r\n                            callback(response.deleteResults)\r\n                    }\r\n                } catch (e) {\r\n                }\r\n            } else {\r\n            }\r\n        };\r\n\r\n        // Oops\r\n        ajax.onerror = function () {\r\n        };\r\n        // GO!\r\n        if (dataPost) {\r\n            ajax.send(dataPost);\r\n        }\r\n        else\r\n            ajax.post();\r\n    };\r\n\r\n    /** PhÆ°Æ¡ng thá»©c PUT\r\n     * @param {*} options\r\n     *  @param {string} options.url\r\n     *  @param {string} options.auth XÃ¡c thá»±c náº¿u cáº§n, dáº¡ng btoa(\"username:password\");\r\n     *  @param {string} options.dataType Loáº¡i dá»¯ liá»u tráº£ vá», máº·c Äá»nh JSON\r\n     *  @param {string} options.data Dá»¯ liá»u PUT lÃªn\r\n     *  @param {string} options.success HÃ m callback khi success\r\n     *  @param {string} options.error HÃ m callback khi error\r\n     */\r\n    put(options) {\r\n        var ajax = new gclient_ajax(options);\r\n        if (options.success) ajax.on('success', function (e) { options.success(e.response, e); });\r\n        if (options.error) ajax.on('error', function (e) { options.error(e); });\r\n        ajax.send(options.url, options.data, options.options, \"PUT\");\r\n    };\r\n}\r\n\r\nmapbox_gl__WEBPACK_IMPORTED_MODULE_0___default.a.ekmap.Request = Request;\r\n\n\n//# sourceURL=webpack:///./src/mapboxgl/core/Request.js?");

/***/ }),

/***/ "./src/mapboxgl/core/Util.js":
/*!***********************************!*\
  !*** ./src/mapboxgl/core/Util.js ***!
  \***********************************/
/*! exports provided: Util */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Util\", function() { return Util; });\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mapbox-gl */ \"mapbox-gl\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mapbox_gl__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _core_Base__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/Base */ \"./src/mapboxgl/core/Base.js\");\n/* harmony import */ var _core_Parse__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/Parse */ \"./src/mapboxgl/core/Parse.js\");\n\r\n\r\n\r\n/**\r\n * @class mapboxgl.supermap.Util\r\n * @category BaseType Util\r\n * @classdesc The tool class.\r\n */\r\nclass Util {\r\n\r\n    static isNumber(value) {\r\n        if (value === \"\") {\r\n            return false;\r\n        }\r\n        let mdata = Number(value);\r\n        if (mdata === 0) {\r\n            return true;\r\n        }\r\n        return !isNaN(mdata);\r\n    }\r\n\r\n    static isString(str) {\r\n        return (typeof str === 'string') && str.constructor === String;\r\n    }\r\n    \r\n    static newGuid(attr) {\r\n        let len = attr || 32;\r\n        let guid = \"\";\r\n        for (let i = 1; i < len; i++) {\r\n            let n = Math.floor(Math.random() * 16.0).toString(16);\r\n            guid += n;\r\n        }\r\n        return guid;\r\n    }\r\n    \r\n    static hexToRgba(hex, opacity) {\r\n        var color = [],\r\n            rgba = [];\r\n        hex = hex.replace(/#/, \"\");\r\n        if (hex.length == 3) {\r\n            var tmp = [];\r\n            for (let i = 0; i < 3; i++) {\r\n                tmp.push(hex.charAt(i) + hex.charAt(i));\r\n            }\r\n            hex = tmp.join(\"\");\r\n        }\r\n        for (let i = 0; i < 6; i += 2) {\r\n            color[i] = \"0x\" + hex.substr(i, 2);\r\n            rgba.push(parseInt(Number(color[i])));\r\n        }\r\n        rgba.push(opacity);\r\n        return \"rgba(\" + rgba.join(\",\") + \")\";\r\n    }\r\n\r\n    static bind(fn, obj) {\r\n        var slice = Array.prototype.slice;\r\n\r\n        if (fn.bind) {\r\n            return fn.bind.apply(fn, slice.call(arguments, 1));\r\n        }\r\n\r\n        var args = slice.call(arguments, 2);\r\n\r\n        return function () {\r\n            return fn.apply(obj, args.length ? args.concat(slice.call(arguments)) : arguments);\r\n        };\r\n    }\r\n\r\n    static serialize(params) {\r\n        var data = '';\r\n        var i = 0;\r\n        params.f = params.f || 'json';\r\n        for (var key in params) {\r\n            i++;\r\n            if (params.hasOwnProperty(key)) {\r\n                var param = params[key];\r\n                var type = Object.prototype.toString.call(param);\r\n                var value;\r\n\r\n                if (data.length) {\r\n                    data += '&';\r\n                }\r\n                if (type === '[object Array]') {\r\n                    value = (Object.prototype.toString.call(param[0]) === '[object Object]') ? JSON.stringify(param) : param.join(',');\r\n                } else if (type === '[object Object]') {\r\n                    value = JSON.stringify(param);\r\n                } else if (type === '[object Date]') {\r\n                    value = param.valueOf();\r\n                } else {\r\n                    value = param;\r\n                }\r\n                data += encodeURIComponent(key) + '=' + value;\r\n            }\r\n        }\r\n        return data;\r\n    }\r\n\r\n    static _setGeometry(geometry) {\r\n        var params = {\r\n            geometry: null,\r\n            geometryType: null\r\n        };\r\n        if (geometry instanceof mapbox_gl__WEBPACK_IMPORTED_MODULE_0___default.a.LngLat) {\r\n            geometry = {\r\n                type: 'Point',\r\n                coordinates: [geometry.lng, geometry.lat] \r\n            };\r\n        }\r\n\r\n        if (geometry instanceof mapbox_gl__WEBPACK_IMPORTED_MODULE_0___default.a.LngLatBounds) {\r\n            // set geometry + geometryType\r\n            params.geometry = this.boundsToExtent(geometry);\r\n            params.geometryType = 'esriGeometryEnvelope';\r\n            return params;\r\n        }\r\n\r\n        // confirm that our GeoJSON is a point, line or polygon\r\n        if (geometry.type === 'Point' || geometry.type === 'LineString' || geometry.type === 'Polygon' || geometry.type === 'MultiPolygon') {\r\n            params.geometry = _core_Parse__WEBPACK_IMPORTED_MODULE_2__[\"Parse\"].geojsonToArcGIS(geometry);\r\n            params.geometryType = this.geojsonTypeToArcGIS(geometry.type);\r\n            return params;\r\n        }\r\n\r\n        // convert L.Marker > L.LatLng\r\n        if (geometry.getLatLng) {\r\n            geometry = geometry.getLatLng();\r\n        }\r\n        // handle L.GeoJSON, pull out the first geometry\r\n        //if (geometry instanceof GeoJSON) {\r\n        //    // reassign geometry to the GeoJSON value  (we are assuming that only one feature is present)\r\n        //    geometry = geometry.getLayers()[0].feature.geometry;\r\n        //    params.geometry = geojsonToArcGIS(geometry);\r\n        //    params.geometryType = geojsonTypeToArcGIS(geometry.type);\r\n        //}\r\n\r\n        // Handle L.Polyline and L.Polygon\r\n        //if (geometry.toGeoJSON) {\r\n        //    geometry = geometry.toGeoJSON();\r\n        //}\r\n\r\n        // handle GeoJSON feature by pulling out the geometry\r\n        if (geometry.type === 'Feature') {\r\n            // get the geometry of the geojson feature\r\n            geometry = geometry.geometry;\r\n        }\r\n      \r\n    }\r\n\r\n    static boundsToExtent(bounds) {\r\n        return {\r\n            'xmin': bounds.getSouthWest().lng,\r\n            'ymin': bounds.getSouthWest().lat,\r\n            'xmax': bounds.getNorthEast().lng,\r\n            'ymax': bounds.getNorthEast().lat,\r\n            'spatialReference': {\r\n                'wkid': 4326\r\n            }\r\n        };\r\n    }\r\n\r\n    static geojsonTypeToArcGIS(geoJsonType) {\r\n        var arcgisGeometryType;\r\n        switch (geoJsonType) {\r\n            case 'Point':\r\n                arcgisGeometryType = 'esriGeometryPoint';\r\n                break;\r\n            case 'MultiPoint':\r\n                arcgisGeometryType = 'esriGeometryMultipoint';\r\n                break;\r\n            case 'LineString':\r\n                arcgisGeometryType = 'esriGeometryPolyline';\r\n                break;\r\n            case 'MultiLineString':\r\n                arcgisGeometryType = 'esriGeometryPolyline';\r\n                break;\r\n            case 'Polygon':\r\n                arcgisGeometryType = 'esriGeometryPolygon';\r\n                break;\r\n            case 'MultiPolygon':\r\n                arcgisGeometryType = 'esriGeometryPolygon';\r\n                break;\r\n        }\r\n\r\n        return arcgisGeometryType;\r\n    }\r\n\r\n    static isArray(obj) {\r\n        return (Object.prototype.toString.call(obj) === '[object Array]');\r\n    };\r\n\r\n    static setOptions(obj, options) {\r\n        if (!Object.prototype.hasOwnProperty.call(obj, 'options')) {\r\n            obj.options = obj.options ? create(obj.options) : {};\r\n        }\r\n        for (var i in options) {\r\n            obj.options[i] = options[i];\r\n        }\r\n        return obj.options;\r\n    }\r\n\r\n    static getUrlParams(options) {\r\n        if (options.url.indexOf('?') !== -1) {\r\n            options.requestParams = options.requestParams || {};\r\n            var queryString = options.url.substring(options.url.indexOf('?') + 1);\r\n            options.url = options.url.split('?')[0];\r\n            options.requestParams = JSON.parse('{\"' + decodeURI(queryString).replace(/\"/g, '\\\\\"').replace(/&/g, '\",\"').replace(/=/g, '\":\"') + '\"}');\r\n        }\r\n        options.url = this.cleanUrl(options.url.split('?')[0]);\r\n        return options;\r\n    }\r\n\r\n    static getUrl(options) {\r\n        if (options.url.indexOf('/0') != '-1') \r\n            option.url = options.url.split('/0').join('');\r\n        if (options.url.indexOf('/1') != '-1')\r\n            option.url = options.url.split('/1').join('');\r\n        if (options.url.indexOf('/2') != '-1')\r\n            option.url = options.url.split('/2').join('');\r\n        if (options.url.indexOf('/3') != '-1')\r\n            option.url = options.url.split('/3').join('');\r\n        return options;\r\n    }\r\n\r\n    static getUrlsParams(options) {\r\n        var string = options.urls.split(\".\")[0];\r\n        var indexCut = string.indexOf(\"{\") - 1;\r\n        var stringCut = string.split(string[indexCut])[2];\r\n        var urls = [];\r\n        for (var i = stringCut[1]; i <= stringCut[3]; i++)\r\n            urls.push(options.urls.split(stringCut).join(i));\r\n        options.urls = urls\r\n        return options;\r\n    }\r\n\r\n    static cleanUrl(url) {\r\n        // trim leading and trailing spaces, but not spaces inside the url\r\n        // add a trailing slash to the url if the user omitted it\r\n        if (url[url.length - 1] !== '/') {\r\n            url += '/';\r\n        }\r\n        return url;\r\n    }\r\n\r\n    static splitWords(str) {\r\n        return this.trim(str).split(/\\s+/);\r\n    }\r\n\r\n    static trim(str) {\r\n        return str.trim ? str.trim() : str.replace(/^\\s+|\\s+$/g, '');\r\n    }\r\n\r\n\r\n\r\n    // @function stamp(obj: Object): Number\r\n    // Returns the unique ID of an object, assigning it one if it doesn't have it.\r\n    static stamp(obj) {\r\n        /*eslint-disable */\r\n        var lastId = 0;\r\n        obj._leaflet_id = obj._leaflet_id || ++lastId;\r\n        return obj._leaflet_id;\r\n        /* eslint-enable */\r\n    }\r\n\r\n    static bind(fn, obj) {\r\n        var slice = Array.prototype.slice;\r\n\r\n        if (fn.bind) {\r\n            return fn.bind.apply(fn, slice.call(arguments, 1));\r\n        }\r\n\r\n        var args = slice.call(arguments, 2);\r\n\r\n        return function () {\r\n            return fn.apply(obj, args.length ? args.concat(slice.call(arguments)) : arguments);\r\n        };\r\n    }\r\n\r\n    static cancelAnimFrame(id) {\r\n        var cancelFn = window.cancelAnimationFrame || this.getPrefixed('CancelAnimationFrame') ||\r\n            this.getPrefixed('CancelRequestAnimationFrame') || function (id) { window.clearTimeout(id); };\r\n        if (id) {\r\n            cancelFn.call(window, id);\r\n        }\r\n    }\r\n\r\n    static getPrefixed(name) {\r\n        return window['webkit' + name] || window['moz' + name] || window['ms' + name];\r\n    }\r\n\r\n    static formatNum(num, digits) {\r\n        var pow = Math.pow(10, (digits === undefined ? 6 : digits));\r\n        return Math.round(num * pow) / pow;\r\n    }\r\n\r\n    static extend(dest) {\r\n        var i, j, len, src;\r\n\r\n        for (j = 1, len = arguments.length; j < len; j++) {\r\n            src = arguments[j];\r\n            for (i in src) {\r\n                dest[i] = src[i];\r\n            }\r\n        }\r\n        return dest;\r\n    }\r\n}\r\n\r\nmapbox_gl__WEBPACK_IMPORTED_MODULE_0___default.a.ekmap.Util = Util;\r\n\n\n//# sourceURL=webpack:///./src/mapboxgl/core/Util.js?");

/***/ }),

/***/ "./src/mapboxgl/core/index.js":
/*!************************************!*\
  !*** ./src/mapboxgl/core/index.js ***!
  \************************************/
/*! exports provided: Util, Parse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Util */ \"./src/mapboxgl/core/Util.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Util\", function() { return _Util__WEBPACK_IMPORTED_MODULE_0__[\"Util\"]; });\n\n/* harmony import */ var _Parse__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Parse */ \"./src/mapboxgl/core/Parse.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Parse\", function() { return _Parse__WEBPACK_IMPORTED_MODULE_1__[\"Parse\"]; });\n\n\r\n\r\n\r\n\n\n//# sourceURL=webpack:///./src/mapboxgl/core/index.js?");

/***/ }),

/***/ "./src/mapboxgl/css/index.js":
/*!***********************************!*\
  !*** ./src/mapboxgl/css/index.js ***!
  \***********************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _style_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./style.css */ \"./src/mapboxgl/css/style.css\");\n/* harmony import */ var _style_css__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_style_css__WEBPACK_IMPORTED_MODULE_0__);\n\n\n//# sourceURL=webpack:///./src/mapboxgl/css/index.js?");

/***/ }),

/***/ "./src/mapboxgl/css/style.css":
/*!************************************!*\
  !*** ./src/mapboxgl/css/style.css ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("// removed by extract-text-webpack-plugin\n\n//# sourceURL=webpack:///./src/mapboxgl/css/style.css?");

/***/ }),

/***/ "./src/mapboxgl/index.js":
/*!*******************************!*\
  !*** ./src/mapboxgl/index.js ***!
  \*******************************/
/*! exports provided: SnapShot, Swipe, FeatureInfomation, Legend, Util, Parse, HeatMapLayer, TiledMapLayer, VectorTiledMapLayer, TiledRoadMapLayer, TiledAdminMapLayer, TiledOSMapLayer, FeatureLayer, FeatureService, MapService, ServiceBase, IdentifyFeatures */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _control__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./control */ \"./src/mapboxgl/control/index.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"SnapShot\", function() { return _control__WEBPACK_IMPORTED_MODULE_0__[\"SnapShot\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Swipe\", function() { return _control__WEBPACK_IMPORTED_MODULE_0__[\"Swipe\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"FeatureInfomation\", function() { return _control__WEBPACK_IMPORTED_MODULE_0__[\"FeatureInfomation\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Legend\", function() { return _control__WEBPACK_IMPORTED_MODULE_0__[\"Legend\"]; });\n\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core */ \"./src/mapboxgl/core/index.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Util\", function() { return _core__WEBPACK_IMPORTED_MODULE_1__[\"Util\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Parse\", function() { return _core__WEBPACK_IMPORTED_MODULE_1__[\"Parse\"]; });\n\n/* harmony import */ var _layer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./layer */ \"./src/mapboxgl/layer/index.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"HeatMapLayer\", function() { return _layer__WEBPACK_IMPORTED_MODULE_2__[\"HeatMapLayer\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"TiledMapLayer\", function() { return _layer__WEBPACK_IMPORTED_MODULE_2__[\"TiledMapLayer\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"VectorTiledMapLayer\", function() { return _layer__WEBPACK_IMPORTED_MODULE_2__[\"VectorTiledMapLayer\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"TiledRoadMapLayer\", function() { return _layer__WEBPACK_IMPORTED_MODULE_2__[\"TiledRoadMapLayer\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"TiledAdminMapLayer\", function() { return _layer__WEBPACK_IMPORTED_MODULE_2__[\"TiledAdminMapLayer\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"TiledOSMapLayer\", function() { return _layer__WEBPACK_IMPORTED_MODULE_2__[\"TiledOSMapLayer\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"FeatureLayer\", function() { return _layer__WEBPACK_IMPORTED_MODULE_2__[\"FeatureLayer\"]; });\n\n/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./services */ \"./src/mapboxgl/services/index.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"FeatureService\", function() { return _services__WEBPACK_IMPORTED_MODULE_3__[\"FeatureService\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"MapService\", function() { return _services__WEBPACK_IMPORTED_MODULE_3__[\"MapService\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"ServiceBase\", function() { return _services__WEBPACK_IMPORTED_MODULE_3__[\"ServiceBase\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"IdentifyFeatures\", function() { return _services__WEBPACK_IMPORTED_MODULE_3__[\"IdentifyFeatures\"]; });\n\n\n\n\n\r\n\n\n//# sourceURL=webpack:///./src/mapboxgl/index.js?");

/***/ }),

/***/ "./src/mapboxgl/layer/FeatureLayer.js":
/*!********************************************!*\
  !*** ./src/mapboxgl/layer/FeatureLayer.js ***!
  \********************************************/
/*! exports provided: FeatureLayer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FeatureLayer\", function() { return FeatureLayer; });\n/* harmony import */ var _core_Util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/Util */ \"./src/mapboxgl/core/Util.js\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! mapbox-gl */ \"mapbox-gl\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(mapbox_gl__WEBPACK_IMPORTED_MODULE_1__);\n\r\n\r\n\r\n/**\r\n * @class mapboxgl.ekmap.FeatureLayer\r\n * @classdesc mapboxgl.ekmap.FeatureLayer is used to visualize, style, query and edit vector geographic data hosted in both ArcGIS Online and published using ArcGIS Server. Copyright text from the service is added to map attribution automatically.\r\n * @category  Layer\r\n * @param {Object} options - Construction parameters.\r\n * @param {string} options.url - Required The URL to the {@link https://developers.arcgis.com/rest/services-reference/layer-feature-service-.htm|Feature Layer}.\r\n * @param {string} options.token - Will use this token to authenticate all calls to the service.\r\n * @extends {mapboxgl.Evented}\r\n * @fires mapboxgl.ekmap.FeatureLayer#loadstart\r\n * @fires mapboxgl.ekmap.FeatureLayer#loadend\r\n */\r\nclass FeatureLayer extends mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default.a.Evented {\r\n\r\n    constructor(options) {\r\n        super();\r\n        this.options = options ? options : {};\r\n        if (options) {\r\n            options = _core_Util__WEBPACK_IMPORTED_MODULE_0__[\"Util\"].setOptions(this, options);\r\n            // set the urls\r\n            if (options.url) {\r\n                options = _core_Util__WEBPACK_IMPORTED_MODULE_0__[\"Util\"].getUrlParams(options);\r\n                if (options.url.indexOf('{s}') !== -1 && options.subdomains && options.url)\r\n                    options.url = options.url.replace('{s}', options.subdomains[0]);\r\n                this.service = new mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default.a.ekmap.FeatureService(options);\r\n            }\r\n\r\n            if (this.options.token) {\r\n                this.tileUrl += ('?token=' + this.options.token);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @function mapboxgl.ekmap.FeatureLayer.prototype.addTo\r\n     * @description Adds the layer to the given map or layer group.\r\n     * @param {mapboxgl.Map} map Adds the layer to the given map or layer group.\r\n     * @returns {this}\r\n     */\r\n    addTo(map) {\r\n        this.map = map;\r\n        var params = {\r\n            where: '1=1'\r\n        };\r\n        var me = this;\r\n        /**\r\n         * @event mapboxgl.ekmap.FeatureLayer#loadstart\r\n         * @description Fired when the feature layer load start.\r\n         */\r\n        me.fire('loadstart', me);\r\n        this.service.query(params, function (result) {\r\n            if (result[0].geometry.type == \"Point\") {\r\n                map.addSource('point', {\r\n                    \"type\": \"geojson\",\r\n                    \"data\": {\r\n                        'type': 'FeatureCollection',\r\n                        'features': result\r\n                    }\r\n                });\r\n\r\n                map.addLayer({\r\n                    \"id\": \"point\",\r\n                    \"type\": \"circle\",\r\n                    \"paint\": {\r\n                        \"circle-radius\": 10,\r\n                        \"circle-color\": \"red\",\r\n                    },\r\n                    \"source\": 'point'\r\n                });\r\n\r\n                map.addLayer({\r\n                    \"id\": \"point-selected\",\r\n                    \"type\": \"circle\",\r\n                    \"paint\": {\r\n                        \"circle-radius\": 10,\r\n                        \"circle-color\": \"red\",\r\n                        \"circle-stroke-color\": '#00ffff',\r\n                        \"circle-stroke-width\": 3,\r\n                    },\r\n                    'filter': ['in', 'OBJECTID', ''],\r\n                    \"source\": 'point'\r\n                });\r\n            }\r\n            if (result[0].geometry.type == \"LineString\") {\r\n                map.addSource('line', {\r\n                    \"type\": \"geojson\",\r\n                    \"data\": {\r\n                        'type': 'FeatureCollection',\r\n                        'features': result\r\n                    }\r\n                });\r\n                \r\n                map.addLayer({\r\n                    'id': \"line\",\r\n                    'type': 'line',\r\n                    'layout': {\r\n                        'line-join': 'round',\r\n                        'line-cap': 'round'\r\n                    },\r\n                    'paint': {\r\n                        'line-color': '#000',\r\n                        'line-width': 5\r\n                    },\r\n                    \"source\": \"line\"\r\n                });\r\n\r\n                map.addLayer({\r\n                    'id': \"line-selected\",\r\n                    'type': 'line',\r\n                    'layout': {\r\n                        'line-join': 'round',\r\n                        'line-cap': 'round'\r\n                    },\r\n                    'paint': {\r\n                        'line-color': 'blue',\r\n                        'line-width': 5\r\n                    },\r\n                    'filter': ['in', 'OBJECTID', ''],\r\n                    \"source\": \"line\"\r\n                });\r\n            }\r\n            if (result[0].geometry.type == \"LineString\") {\r\n                map.addSource('area', {\r\n                    \"type\": \"geojson\",\r\n                    lineMetrics: true,\r\n                    'data': {\r\n                        'type': 'Feature',\r\n                        'geometry': {\r\n                            'type': 'LineString',\r\n                            'coordinates': result\r\n                        }\r\n                    }\r\n                });\r\n\r\n                map.addLayer({\r\n                    'id': 'area',\r\n                    'type': 'line',\r\n                    'layout': {\r\n                        'line-join': 'round',\r\n                        'line-cap': 'round'\r\n                    },\r\n                    'paint': {\r\n                        'line-color': '#90c258',\r\n                        'line-width': 5,\r\n                        'line-gradient': [\r\n                            'interpolate',\r\n                            ['linear'],\r\n                            ['line-progress'],\r\n                            0,\r\n                            'blue',\r\n                            0.1,\r\n                            'royalblue',\r\n                            0.3,\r\n                            'cyan',\r\n                            0.5,\r\n                            'lime',\r\n                            0.7,\r\n                            'yellow',\r\n                            1,\r\n                            'red'\r\n                        ],\r\n                    },\r\n                    'source': 'area'\r\n                })\r\n\r\n                map.addLayer({\r\n                    'id': 'area-selected',\r\n                    'type': 'line',\r\n                    'layout': {\r\n                        'line-join': 'round',\r\n                        'line-cap': 'round'\r\n                    },\r\n                    'paint': {\r\n                        'line-color': 'white',\r\n                        'line-width': 5\r\n                    },\r\n                    'filter': ['in', 'OBJECTID', ''],\r\n                    \"source\": 'area'\r\n                })\r\n            }\r\n            /**\r\n            * @event mapboxgl.ekmap.FeatureLayer#loadend\r\n            * @description Fired when the feature layer load end. \r\n            */\r\n            me.fire('loadend', me);\r\n        })\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * @function mapboxgl.ekmap.FeatureLayer.prototype.query\r\n     * @description Query data.\r\n     * @param {Object} params - Adds the layer to the given map or layer group.\r\n     * @param {RequestCallback} callback \r\n     *\r\n     */\r\n    query(params, callback, context) {\r\n        return this.service.query(params, callback, context);\r\n    }\r\n\r\n    /**\r\n     * @function mapboxgl.ekmap.FeatureLayer.prototype.queryByBound\r\n     * @description  is an abstraction for the find API included in Map Services. It provides a chainable API for building request parameters and executing find tasks.\r\n     * @param {mapboxgl.LngLatBounds} lngLatBounds\r\n     * @param {RequestCallback} callback\r\n     */\r\n    queryByBound(params, callback, context) {\r\n        return this.service.queryByBound(params, callback, context);\r\n    }\r\n\r\n    /**\r\n     * @function mapboxgl.ekmap.FeatureLayer.prototype.queryByGeometry\r\n     * @description  is an abstraction for the find API included in Map Services. It provides a chainable API for building request parameters and executing find tasks.\r\n     * @param {string} geometry The geometry to apply as the spatial filter. The structure of the geometry is the same as the structure of the JSON geometry objects returned by the ArcGIS REST API. In addition to the JSON structures, for envelopes and points, you can specify the geometry with a simpler comma-separated syntax.\r\n     * @param {RequestCallback} callback\r\n     */\r\n    queryByGeometry(params, callback, context) {\r\n        return this.service.queryByGeometry(params, callback, context);\r\n    }\r\n\r\n    /**\r\n     * @function mapboxgl.ekmap.FeatureLayer.prototype.addFeature\r\n     * @description Adds a new feature to the feature layer. this also adds the feature to the map if creation is successful.\r\n     * @param {GeoJSONObject} params GeoJSON of feature add (To change point color, set 'color' for options GeoJSON, the default is light blue ('#3FB1CE')).\r\n     * @param {Function} callback\r\n     * @param {Object} context\r\n     * @returns {this}\r\n     */\r\n    addFeature(params, callback, context) {\r\n        var coor = params.geometry.coordinates;\r\n        var marker = new mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default.a.Marker({\r\n            'color': params.color ? params.color : ''\r\n        })\r\n            .setLngLat(coor)\r\n            .addTo(this.map);\r\n        this.addFeatures(params, callback, context);\r\n    }\r\n\r\n    /**\r\n     * @private\r\n     * @function mapboxgl.ekmap.FeatureLayer.prototype.addFeatures\r\n     * @description Adds a new feature to the feature layer. this also adds the feature to the map if creation is successful.\r\n     * @param {GeoJSONObject} params GeoJSON of feature add (To change point color, set 'color' for options GeoJSON, the default is light blue ('#3FB1CE')).\r\n     * @param {Function} callback\r\n     * @param {Object} context\r\n     * @returns {this}\r\n    */\r\n    addFeatures(params, callback, context) {\r\n        return this.service.addFeatures(params, callback, context);\r\n    }\r\n\r\n    /**\r\n    * @function mapboxgl.ekmap.FeatureLayer.prototype.updateFeature\r\n    * @description Update the provided feature on the Feature Layer. This also updates the feature on the map. To update the point location on the map. Please use function {@link mapboxgl.ekmap.FeatureLayer.html#refresh|refresh()} then update.\r\n    * @param {GeoJSONObject} feature Infomation feature by geoJSON.\r\n    * @param {Function} callback The callback of result data returned by the server side.\r\n    * @param {Object} context\r\n    * @returns {this}\r\n    */\r\n    updateFeature(feature, callback, context) {\r\n        this.updateFeatures(feature, callback, context);\r\n    }\r\n\r\n    /**\r\n    * @private\r\n    * @function mapboxgl.ekmap.FeatureLayer.prototype.updateFeatures\r\n    * @description Update the provided feature on the Feature Layer. This also updates the feature on the map.\r\n    * @param {GeoJSONObject} geojson Infomation feature by geoJSON.\r\n    * @param {Function} callback The callback of result data returned by the server side.\r\n    * @param {Object} context\r\n    */\r\n    updateFeatures(geojson, callback, context) {\r\n        return this.service.updateFeatures(geojson, callback, context);\r\n    }\r\n\r\n    /**\r\n    * @function mapboxgl.ekmap.FeatureLayer.prototype.deleteFeature\r\n    * @description Remove the feature with the provided id from the feature layer. This will also remove the feature from the map if it exists. Please use function {@link mapboxgl.ekmap.FeatureLayer.html#refresh|refresh()} then delete.\r\n    * @param {string} id Id of feature.\r\n    * @param {Function} callback The callback of result data returned by the server side.\r\n    * @param {Object} context\r\n    * @returns {this}\r\n    */\r\n    deleteFeature(id, callback, context) {\r\n        this.deleteFeatures(id, callback, context);\r\n    }\r\n\r\n    /**\r\n    * @private\r\n    * @function mapboxgl.ekmap.FeatureLayer.prototype.deleteFeatures\r\n    * @description Removes an array of features with the provided ids from the feature layer. This will also remove the features from the map if they exist.\r\n    * @param {Interger} ids List id of features.\r\n    * @param {Function} callback The callback of result data returned by the server side.\r\n    * @param {Object} context\r\n    * @returns {this}\r\n    */\r\n    deleteFeatures(ids, callback, context) {\r\n        return this.service.deleteFeatures(ids, callback, context)\r\n    }\r\n\r\n    /**\r\n    * @function mapboxgl.ekmap.FeatureLayer.prototype.on\r\n    * @description Listen for a event.\r\n    * @param {string} event The event type or array of event types.\r\n    * @param {Function} callback The callback of result data returned by the server side.\r\n    * @returns {} Unique key for the listener. If called with an array of event types as the first argument, the return will be an array of keys.\r\n    */\r\n    // on(event, callback) {\r\n    //     var me = this;\r\n    //     if (event == 'click') {\r\n    //         this.map.on('click', function (e) {\r\n    //             var lngLat = e.lngLat;\r\n    //             var featureService = new mapboxgl.ekmap.FeatureService(me.options);\r\n    //             featureService.nearby(lngLat.lat, lngLat.lng, function (obj) {\r\n    //                 if (obj.objectIds)\r\n    //                     callback(obj);\r\n    //                 else\r\n    //                     callback(e)\r\n    //             })\r\n\r\n    //         })\r\n    //     }\r\n    // }\r\n\r\n    /**\r\n    * @function mapboxgl.ekmap.FeatureLayer.prototype.refresh\r\n    * @description Redraws all features from the feature layer that exist on the map.\r\n    */\r\n    refresh() {\r\n        var me = this;\r\n        var data = {};\r\n        var params = {\r\n            where: '1=1'\r\n        };\r\n        this.service.query(params, function (result) {\r\n            data = {\r\n                'type': 'FeatureCollection',\r\n                'features': result\r\n            };\r\n            var filter = [\"in\", \"OBJECTID\"];\r\n            if (me.map.getLayer('point')) {\r\n                me.map.getSource('point').setData(data);\r\n                map.setFilter('point-selected', filter);\r\n            }\r\n            if (me.map.getLayer('line')) {\r\n                map.setFilter('line-selected', filter);\r\n                me.map.getSource('line').setData(data);\r\n            }\r\n            if (me.map.getLayer('area')) {\r\n                me.map.getSource('area').setData(data);\r\n                map.setFilter('area-selected', filter);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n    * @function mapboxgl.ekmap.FeatureLayer.prototype.applyEdits\r\n    * @description This operation adds, updates, and deletes features to the associated feature layer. Please use function {@link mapboxgl.ekmap.FeatureLayer.html#refresh|refresh()} then applyEdits.\r\n    * @param {Object} params Options.\r\n    * @param {GeoJSONObject} params.adds GeoJSON of feature add (To change point color, set 'color' for options GeoJSON).\r\n    * @param {GeoJSONObject} params.updates GeoJSON of feature update.\r\n    * @param {Interger} params.deletes Id of feature delete.\r\n    * @param {RequestCallback} callback\r\n    */\r\n    applyEdits(params, callback, context) {\r\n        if (params.adds) {\r\n            var coor = params.adds.geometry.coordinates;\r\n            var marker = new mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default.a.Marker({\r\n                'color': params.adds.color ? params.adds.color : ''\r\n            })\r\n                .setLngLat(coor)\r\n                .addTo(this.map);\r\n        }\r\n        return this.service.applyEdits(params, callback, context);\r\n    }\r\n}\r\n\r\nmapbox_gl__WEBPACK_IMPORTED_MODULE_1___default.a.ekmap.FeatureLayer = FeatureLayer;\r\n\n\n//# sourceURL=webpack:///./src/mapboxgl/layer/FeatureLayer.js?");

/***/ }),

/***/ "./src/mapboxgl/layer/HeatMapLayer.js":
/*!********************************************!*\
  !*** ./src/mapboxgl/layer/HeatMapLayer.js ***!
  \********************************************/
/*! exports provided: HeatMapLayer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"HeatMapLayer\", function() { return HeatMapLayer; });\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mapbox-gl */ \"mapbox-gl\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mapbox_gl__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _core_Base__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/Base */ \"./src/mapboxgl/core/Base.js\");\n/* harmony import */ var _core_Parse__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/Parse */ \"./src/mapboxgl/core/Parse.js\");\n/* harmony import */ var _core_Util__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/Util */ \"./src/mapboxgl/core/Util.js\");\n\r\n\r\n\r\n\r\n\r\n/**\r\n * @class mapboxgl.ekmap.HeatMapLayer\r\n * @classdesc The class of the thermal layer.\r\n * @category  Visualization\r\n * @param {string} name The name of the source.\r\n * @param {Object} options Construction parameters.\r\n * @param {mapboxgl.Map} options.map The map object of mapboxgl.\r\n * @param {string} options.id Id of layer.\r\n * @param {number} options.radius=50 The maximum radius of the hotspot rendering (hotspot pixel radius) in px. \r\n * @extends {mapboxgl.Evented}\r\n */\r\nclass HeatMapLayer extends mapbox_gl__WEBPACK_IMPORTED_MODULE_0___default.a.Evented {\r\n\r\n    constructor(name, options) {\r\n        super();\r\n        \r\n        var _options = options ? options : {};\r\n\r\n         /**\r\n         * @member {string} mapboxgl.ekmap.HeatMapLayer.prototype.name\r\n         * @description Name of source.\r\n         */\r\n        this.source = name;\r\n\r\n         /**\r\n         * @member {string} mapboxgl.ekmap.HeatMapLayer.prototype.id\r\n         * @description Id of layer.\r\n         */\r\n        this.id = _options.id ? _options.id : \"heatmap\";\r\n        \r\n        /**\r\n         * @member {mapboxgl.Map} mapboxgl.ekmap.HeatMapLayer.prototype.map\r\n         * @description map\r\n         */\r\n        this.map = _options.map ? _options.map : null;\r\n\r\n        /**\r\n         * @member {number} mapboxgl.ekmap.HeatMapLayer.prototype.radius\r\n         * @description map\r\n         */\r\n        this.radius = _options.radius ? _options.radius : 50\r\n\r\n         /**\r\n         * @member {string} mapboxgl.ekmap.HeatMapLayer.prototype.type\r\n         * @description Default 'heatmap'.\r\n         */\r\n        this.type = 'heatmap';\r\n\r\n         /**\r\n         * @member {Object} mapboxgl.ekmap.HeatMapLayer.prototype.paint\r\n         * @description  Object.\r\n         * @private\r\n         */\r\n        this.paint = {\r\n            \"heatmap-weight\": 1,\r\n            \"heatmap-intensity\": 2,\r\n            \"heatmap-color\": [\r\n                \"interpolate\",\r\n                [\"linear\"],\r\n                [\"heatmap-density\"],\r\n                0,\r\n                \"rgba(33,102,172,0)\",\r\n                0.2,\r\n                \"rgb(103,169,207)\",\r\n                0.4,\r\n                \"rgb(209,229,240)\",\r\n                0.6,\r\n                \"rgb(253,219,199)\",\r\n                0.8,\r\n                \"rgb(239,138,98)\",\r\n                1,\r\n                \"rgb(178,24,43)\",\r\n            ],\r\n            \"heatmap-radius\": this.radius,\r\n        };\r\n    }\r\n\r\n    /**\r\n     * @function mapboxgl.ekmap.HeatMapLayer.prototype.addFeatures\r\n     * @description Add features\r\n     * @param {GeoJSONObject} features \r\n     *\r\n     * @example\r\n     * var geojson = {\r\n     *      \"type\": \"FeatureCollection\",\r\n     *      \"features\": [\r\n     *          {\r\n     *              \"type\": \"feature\",\r\n     *              \"geometry\": {\r\n     *                  \"type\": \"Point\",  //åªæ¯æpointç±»å\r\n     *                  \"coordinates\": [0, 0]\r\n     *              },\r\n     *              \"properties\": {\r\n     *                  \"height\": Math.random()*9,\r\n     *                  \"geoRadius\": useGeoRadius?radius:null\r\n     *              }\r\n     *          }\r\n     *      ]\r\n     *   };\r\n     * var heatMapLayer = new mapboxgl.ekmap.HeatMapLayer(\"heatmaplayer\",{\"map\":map});                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   pLayer = new mapboxgl.ekmap.HeatMapLayer(\"heatmaplayer\",{\"featureWeight\":\"height\"});\r\n     * heatMapLayer.addFeatures(geojson);\r\n     * map.addLayer(heatMapLayer);\r\n     */\r\n    addFeatures(features) {\r\n        this.map.addSource(this.source, {\r\n            type: \"geojson\",\r\n            data: features,\r\n        });\r\n    }\r\n}\r\n\r\nmapbox_gl__WEBPACK_IMPORTED_MODULE_0___default.a.ekmap.HeatMapLayer = HeatMapLayer;\r\n\n\n//# sourceURL=webpack:///./src/mapboxgl/layer/HeatMapLayer.js?");

/***/ }),

/***/ "./src/mapboxgl/layer/TiledAdminMapLayer.js":
/*!**************************************************!*\
  !*** ./src/mapboxgl/layer/TiledAdminMapLayer.js ***!
  \**************************************************/
/*! exports provided: TiledAdminMapLayer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TiledAdminMapLayer\", function() { return TiledAdminMapLayer; });\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mapbox-gl */ \"mapbox-gl\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mapbox_gl__WEBPACK_IMPORTED_MODULE_0__);\n\r\n\r\n/**\r\n * @class mapboxgl.ekmap.TiledAdminMapLayer\r\n * @classdesc The TiledAdminMapLayer class.\r\n * @category  Layer\r\n * @param {Object} options  Construction parameters.\r\n * @param {string} options.token  Will use this token to authenticate all calls to the service.\r\n * @extends {mapboxgl.Evented}\r\n * @example\r\n * var map = new mapboxgl.Map({\r\n *     container: 'map1',\r\n *     center: [103.9, 22.2],\r\n *     zoom: 6\r\n * });\r\n * var adminMap = new mapboxgl.ekmap.TiledAdminMapLayer({\r\n *      token: {YOUR_API_KEY}\r\n * })\r\n *   .addTo(map);\r\n */\r\nclass TiledAdminMapLayer extends mapbox_gl__WEBPACK_IMPORTED_MODULE_0___default.a.Evented {\r\n\r\n    constructor(options) {\r\n        super();\r\n        this.options = options ? options : {};\r\n        this.urls = [\r\n            \"https://g1.cloudgis.vn/gservices/rest/maps/adminmap/tile/{z}/{x}/{y}.png\",\r\n            \"https://g2.cloudgis.vn/gservices/rest/maps/adminmap/tile/{z}/{x}/{y}.png\",\r\n            \"https://g3.cloudgis.vn/gservices/rest/maps/adminmap/tile/{z}/{x}/{y}.png\",\r\n            \"https://g4.cloudgis.vn/gservices/rest/maps/adminmap/tile/{z}/{x}/{y}.png\"\r\n        ];\r\n        this.urlsToken = [];\r\n        if (options)\r\n            this.urls.forEach(url => {\r\n                url += \"?apikey=\" + options.token;\r\n                this.urlsToken.push(url);\r\n            })\r\n        if (this.urlsToken.length > 0) {\r\n            this.tiledMapLayer = new mapbox_gl__WEBPACK_IMPORTED_MODULE_0___default.a.ekmap.TiledMapLayer({\r\n                urls: this.urlsToken\r\n            })\r\n        }\r\n        else {\r\n            this.tiledMapLayer = new mapbox_gl__WEBPACK_IMPORTED_MODULE_0___default.a.ekmap.TiledMapLayer({\r\n                urls: this.urls\r\n            })\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @function mapboxgl.ekmap.TiledAdminMapLayer.prototype.addTo\r\n     * @description Adds the layer to the given map or layer group.\r\n     * @param {mapboxgl.Map} map - Adds the layer to the given map or layer group.\r\n     * @returns this\r\n     */\r\n    addTo(map) {\r\n        return this.tiledMapLayer.addTo(map);\r\n    }\r\n}\r\n\r\nmapbox_gl__WEBPACK_IMPORTED_MODULE_0___default.a.ekmap.TiledAdminMapLayer = TiledAdminMapLayer;\r\n\n\n//# sourceURL=webpack:///./src/mapboxgl/layer/TiledAdminMapLayer.js?");

/***/ }),

/***/ "./src/mapboxgl/layer/TiledMapLayer.js":
/*!*********************************************!*\
  !*** ./src/mapboxgl/layer/TiledMapLayer.js ***!
  \*********************************************/
/*! exports provided: TiledMapLayer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TiledMapLayer\", function() { return TiledMapLayer; });\n/* harmony import */ var _core_Util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/Util */ \"./src/mapboxgl/core/Util.js\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! mapbox-gl */ \"mapbox-gl\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(mapbox_gl__WEBPACK_IMPORTED_MODULE_1__);\n\r\n\r\n\r\n/**\r\n * @class mapboxgl.ekmap.TiledMapLayer\r\n * @classdesc The TiledMapLayer class.\r\n * @category  Layer\r\n * @param {Object} options - Construction parameters.\r\n * @param {string} options.url - Required: URL of the {@link https://developers.arcgis.com/rest/services-reference/layer-feature-service-.htm|Map Service} with a tile cache.\r\n * @param {string} options.token - Will use this token to authenticate all calls to the service.\r\n * @extends {mapboxgl.Evented}\r\n */\r\nclass TiledMapLayer extends mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default.a.Evented {\r\n\r\n    constructor(options) {\r\n        super();\r\n        this.options = options ? options : {};\r\n        if (options) {\r\n            options = _core_Util__WEBPACK_IMPORTED_MODULE_0__[\"Util\"].setOptions(this, options);\r\n            // set the urls\r\n            if (options.url) {\r\n                options = _core_Util__WEBPACK_IMPORTED_MODULE_0__[\"Util\"].getUrlParams(options);\r\n                this.tileUrl = (options.proxy ? options.proxy + '?' : '') + options.url + 'tile/{z}/{y}/{x}' + (options.requestParams && Object.keys(options.requestParams).length > 0 ? _core_Util__WEBPACK_IMPORTED_MODULE_0__[\"Util\"].getParamString(options.requestParams) : '');\r\n                //if (options.url.indexOf('{s}') !== -1 && options.subdomains && options.url)\r\n                //    options.url = options.url.replace('{s}', options.subdomains[0]);\r\n\r\n                this.service = new mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default.a.ekmap.MapService(options);\r\n            }\r\n            if (options.urls) \r\n                this.tileUrls = options.urls\r\n            // Remove subdomain in url\r\n            // https://github.com/Esri/esri-leaflet/issues/991\r\n            //this.service.addEventParent(this);\r\n            //var arcgisonline = new RegExp(/tiles.arcgis(online)?\\.com/g);\r\n            //if (arcgisonline.test(options.url)) {\r\n            //    this.tileUrl = this.tileUrl.replace('://tiles', '://tiles{s}');\r\n            //    options.subdomains = ['1', '2', '3', '4'];\r\n            //}\r\n\r\n            if (this.options.token) {\r\n                this.tileUrl += ('?token=' + this.options.token);\r\n            }\r\n            //return new mapboxgl.ekmap.MapService(this.tileUrl);\r\n            // init layer by calling TileLayers initialize method\r\n            //TileLayer.prototype.initialize.call(this, this.tileUrl, options);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @function mapboxgl.ekmap.TiledMapLayer.prototype.addTo\r\n     * @description Adds the layer to the given map or layer group.\r\n     * @param {mapboxgl.Map} map - Adds the layer to the given map or layer group.\r\n     * @returns this\r\n     */\r\n    addTo(map) {\r\n        var nameID = 'raster-tiles';\r\n        var id = Math.round(Math.random() * 100);\r\n        if (this.tileUrl) {\r\n            map.addSource(nameID + id, {\r\n                \"type\": \"raster\",\r\n                \"tiles\": [this.tileUrl],\r\n                \"tileSize\": 256\r\n            });\r\n            map.addLayer(\r\n                {\r\n                    \"id\": nameID + id,\r\n                    \"type\": \"raster\",\r\n                    \"source\": nameID + id,\r\n                    \"minzoom\": 0,\r\n                    \"maxzoom\": 22,\r\n                    'layout': {\r\n                        'visibility': 'visible'\r\n                    },\r\n                    'metadata': {\r\n                        'type': 'overlayer',\r\n                        'url': this.options.url,\r\n                        'token': this.options.token ? this.options.token : \"\"\r\n                        //'layers': [\r\n                        //    {\r\n                        //        id: 'Thá»§y Äiá»n',\r\n                        //        geometryType: 'esriGeometryPoint',\r\n                        //        url: 'http://s2.cloudgis.vn/arcgis/rest/services/GIS/VietNam/FeatureServer/0/'\r\n                        //    },\r\n                        //    {\r\n                        //        id: 'ÄÆ°á»ng giao thÃ´ng',\r\n                        //        geometryType: 'esriGeometryPolyline',\r\n                        //        url: 'http://s2.cloudgis.vn/arcgis/rest/services/GIS/VietNam/FeatureServer/1/'\r\n                        //    },\r\n                        //    {\r\n                        //        id: 'Äá»a pháº­n tá»nh',\r\n                        //        geometryType: 'esriGeometryPolygon',\r\n                        //        url: 'http://s2.cloudgis.vn/arcgis/rest/services/GIS/VietNam/FeatureServer/2/'\r\n                        //    }\r\n                        //]\r\n                    }\r\n                })\r\n        }\r\n            \r\n        if (this.tileUrls) {\r\n            map.addSource(nameID + id, {\r\n                \"type\": \"raster\",\r\n                \"tiles\": this.tileUrls,\r\n                \"tileSize\": 256\r\n            });\r\n            map.addLayer(\r\n                {\r\n                    \"id\": nameID + id,\r\n                    \"type\": \"raster\",\r\n                    \"source\": nameID + id,\r\n                    \"minzoom\": 0,\r\n                    \"maxzoom\": 22,\r\n                    'layout': {\r\n                        'visibility': 'visible'\r\n                    },\r\n                    'metadata': {\r\n                        'type': 'overlayer',\r\n                        //'url': 'http://s2.cloudgis.vn/arcgis/rest/services/GIS/VietNam/MapServer/',\r\n                        //'layers': [\r\n                        //    {\r\n                        //        id: 'Thá»§y Äiá»n',\r\n                        //        geometryType: 'esriGeometryPoint',\r\n                        //        url: 'http://s2.cloudgis.vn/arcgis/rest/services/GIS/VietNam/FeatureServer/0/'\r\n                        //    },\r\n                        //    {\r\n                        //        id: 'ÄÆ°á»ng giao thÃ´ng',\r\n                        //        geometryType: 'esriGeometryPolyline',\r\n                        //        url: 'http://s2.cloudgis.vn/arcgis/rest/services/GIS/VietNam/FeatureServer/1/'\r\n                        //    },\r\n                        //    {\r\n                        //        id: 'Äá»a pháº­n tá»nh',\r\n                        //        geometryType: 'esriGeometryPolygon',\r\n                        //        url: 'http://s2.cloudgis.vn/arcgis/rest/services/GIS/VietNam/FeatureServer/2/'\r\n                        //    }\r\n                        //]\r\n                    }\r\n                })\r\n        }\r\n            \r\n        \r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * @function mapboxgl.ekmap.TiledMapLayer.prototype.identity\r\n     * @description Returns a new mapboxgl.ekmap.IdentifyFeatures object that can be used to identify features on this layer. Your callback function will be passed a GeoJSON FeatureCollection with the results or an error.\r\n     * @returns this\r\n     */\r\n    identify() {\r\n        return this.service.identify();\r\n    }\r\n\r\n    /**\r\n     * @function mapboxgl.ekmap.TiledMapLayer.prototype.find\r\n     * @description Adds the layer to the given map or layer group.\r\n     * @param {Object} params - Adds the layer to the given map or layer group.\r\n     * @param {RequestCallback} callback \r\n     */\r\n    find(params, callback, context) {\r\n        return this.service.find(params, callback, context);\r\n    }\r\n\r\n    /**\r\n     * @function mapboxgl.ekmap.TiledMapLayer.prototype.legend\r\n     * @description legend of Tiled Map Layer.\r\n     * @param {RequestCallback} callback\r\n     *\r\n     */\r\n    legend(callback, context) {\r\n        return this.service.legend(callback, context);\r\n    }\r\n}\r\n\r\nmapbox_gl__WEBPACK_IMPORTED_MODULE_1___default.a.ekmap.TiledMapLayer = TiledMapLayer;\r\n\n\n//# sourceURL=webpack:///./src/mapboxgl/layer/TiledMapLayer.js?");

/***/ }),

/***/ "./src/mapboxgl/layer/TiledOSMapLayer.js":
/*!***********************************************!*\
  !*** ./src/mapboxgl/layer/TiledOSMapLayer.js ***!
  \***********************************************/
/*! exports provided: TiledOSMapLayer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TiledOSMapLayer\", function() { return TiledOSMapLayer; });\n/* harmony import */ var _core_Util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/Util */ \"./src/mapboxgl/core/Util.js\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! mapbox-gl */ \"mapbox-gl\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(mapbox_gl__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _TiledMapLayer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TiledMapLayer */ \"./src/mapboxgl/layer/TiledMapLayer.js\");\n\r\n\r\n\r\n\r\n/**\r\n * @class mapboxgl.ekmap.TiledOSMapLayer\r\n * @classdesc The TiledOSMapLayer class.\r\n * @category Layer\r\n * @param {Object} options - Control options.\r\n * @param {string} options.token - Will use this token to authenticate all calls to the service.\r\n * @extends {TiledMapLayer}\r\n * @example\r\n * var map = new mapboxgl.Map({\r\n *     container: 'divMapId',\r\n *     center: [103.9, 22.2],\r\n *     zoom: 6\r\n * });\r\n * var OSMap = new mapboxgl.ekmap.TiledOSMapLayer({})\r\n *   .addTo(map);\r\n */\r\nclass TiledOSMapLayer extends _TiledMapLayer__WEBPACK_IMPORTED_MODULE_2__[\"TiledMapLayer\"] {\r\n\r\n    constructor(options) {\r\n        super();\r\n        this.options = options ? options : {};\r\n        this.urls = [\r\n            \"https://a.tile.openstreetmap.org/{z}/{x}/{y}.png\",\r\n            \"https://b.tile.openstreetmap.org/{z}/{x}/{y}.png\",\r\n            \"https://c.tile.openstreetmap.org/{z}/{x}/{y}.png\",\r\n        ]\r\n        this.urlsToken = [];\r\n        if (options)\r\n            this.urls.forEach(url => {\r\n                url += \"?apikey=\" + options.token;\r\n                this.urlsToken.push(url);\r\n            })\r\n        if (this.urlsToken.length > 0) {\r\n            this.tiledMapLayer = new mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default.a.ekmap.TiledMapLayer({\r\n                urls: this.urlsToken\r\n            })\r\n        }\r\n        else {\r\n            this.tiledMapLayer = new mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default.a.ekmap.TiledMapLayer({\r\n                urls: this.urls\r\n            })\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @function mapboxgl.ekmap.TiledOSMapLayer.prototype.addTo\r\n     * @description Adds the layer to the given map or layer group.\r\n     * @param {mapboxgl.Map} map - Adds the layer to the given map or layer group.\r\n     * @returns this\r\n     */\r\n    addTo(map) {\r\n        return this.tiledMapLayer.addTo(map);\r\n    }\r\n}\r\n\r\nmapbox_gl__WEBPACK_IMPORTED_MODULE_1___default.a.ekmap.TiledOSMapLayer = TiledOSMapLayer;\r\n\n\n//# sourceURL=webpack:///./src/mapboxgl/layer/TiledOSMapLayer.js?");

/***/ }),

/***/ "./src/mapboxgl/layer/TiledRoadMapLayer.js":
/*!*************************************************!*\
  !*** ./src/mapboxgl/layer/TiledRoadMapLayer.js ***!
  \*************************************************/
/*! exports provided: TiledRoadMapLayer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TiledRoadMapLayer\", function() { return TiledRoadMapLayer; });\n/* harmony import */ var _core_Util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/Util */ \"./src/mapboxgl/core/Util.js\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! mapbox-gl */ \"mapbox-gl\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(mapbox_gl__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _TiledMapLayer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TiledMapLayer */ \"./src/mapboxgl/layer/TiledMapLayer.js\");\n\r\n\r\n\r\n\r\n/**\r\n * @class mapboxgl.ekmap.TiledRoadMapLayer\r\n * @classdesc The TiledRoadMapLayer class.\r\n * @category Layer\r\n * @param {Object} options - Control options.\r\n * @param {string} options.token - Will use this token to authenticate all calls to the service.\r\n * @extends {TiledMapLayer}\r\n * @example\r\n * var map = new mapboxgl.Map({\r\n *     container: 'map1',\r\n *     center: [103.9, 22.2],\r\n *     zoom: 6\r\n * });\r\n * var roadMap = new mapboxgl.ekmap.TiledRoadMapLayer({})\r\n *   .addTo(map);\r\n */\r\nclass TiledRoadMapLayer extends _TiledMapLayer__WEBPACK_IMPORTED_MODULE_2__[\"TiledMapLayer\"] {\r\n\r\n    constructor(options) {\r\n        super();\r\n        this.options = options ? options : {};\r\n        this.urls = [\r\n            \"https://g1.cloudgis.vn/gservices/rest/maps/roadmap/tile/{z}/{x}/{y}.png\",\r\n            \"https://g2.cloudgis.vn/gservices/rest/maps/roadmap/tile/{z}/{x}/{y}.png\",\r\n            \"https://g3.cloudgis.vn/gservices/rest/maps/roadmap/tile/{z}/{x}/{y}.png\",\r\n            \"https://g4.cloudgis.vn/gservices/rest/maps/roadmap/tile/{z}/{x}/{y}.png\"\r\n        ];\r\n        this.urlsToken = [];\r\n        if (options)\r\n            this.urls.forEach(url => {\r\n                url += \"?apikey=\" + options.token;\r\n                this.urlsToken.push(url);\r\n            })\r\n        if (this.urlsToken.length > 0) {\r\n            this.tiledMapLayer = new mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default.a.ekmap.TiledMapLayer({\r\n                urls: this.urlsToken\r\n            })\r\n        }\r\n        else {\r\n            this.tiledMapLayer = new mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default.a.ekmap.TiledMapLayer({\r\n                urls: this.urls\r\n            })\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @function mapboxgl.ekmap.TiledRoadMapLayer.prototype.addTo\r\n     * @description Adds the layer to the given map or layer group.\r\n     * @param {mapboxgl.Map} map - Adds the layer to the given map or layer group.\r\n     * @returns this\r\n     */\r\n    addTo(map) {\r\n        return this.tiledMapLayer.addTo(map);\r\n    }\r\n}\r\n\r\nmapbox_gl__WEBPACK_IMPORTED_MODULE_1___default.a.ekmap.TiledRoadMapLayer = TiledRoadMapLayer;\r\n\n\n//# sourceURL=webpack:///./src/mapboxgl/layer/TiledRoadMapLayer.js?");

/***/ }),

/***/ "./src/mapboxgl/layer/VectorTiledMapLayer.js":
/*!***************************************************!*\
  !*** ./src/mapboxgl/layer/VectorTiledMapLayer.js ***!
  \***************************************************/
/*! exports provided: VectorTiledMapLayer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"VectorTiledMapLayer\", function() { return VectorTiledMapLayer; });\n/* harmony import */ var _core_Util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/Util */ \"./src/mapboxgl/core/Util.js\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! mapbox-gl */ \"mapbox-gl\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(mapbox_gl__WEBPACK_IMPORTED_MODULE_1__);\n\r\n\r\n\r\n/**\r\n * @class mapboxgl.ekmap.VectorTiledMapLayer\r\n * @classdesc The VectorTiledMapLayer class.\r\n * @category Layer\r\n * @param {string} url - Url Vector Tile Services.\r\n * @extends {mapboxgl.Evented}\r\n */\r\nclass VectorTiledMapLayer extends mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default.a.Evented {\r\n    constructor(url) {\r\n        super();\r\n        this.url = url;\r\n    }\r\n\r\n    /**\r\n     * @function mapboxgl.ekmap.VectorTiledMapLayer.prototype.addTo\r\n     * @description Adds the layer to the given map or layer group.\r\n     * @param {mapboxgl.Map} map - Adds the layer to the given map or layer group.\r\n     * @returns this\r\n     */\r\n    addTo(map) {\r\n        map.setStyle(url);\r\n        return this;\r\n    }\r\n}\r\n\r\nmapbox_gl__WEBPACK_IMPORTED_MODULE_1___default.a.ekmap.VectorTiledMapLayer = VectorTiledMapLayer;\r\n\n\n//# sourceURL=webpack:///./src/mapboxgl/layer/VectorTiledMapLayer.js?");

/***/ }),

/***/ "./src/mapboxgl/layer/index.js":
/*!*************************************!*\
  !*** ./src/mapboxgl/layer/index.js ***!
  \*************************************/
/*! exports provided: HeatMapLayer, TiledMapLayer, VectorTiledMapLayer, TiledRoadMapLayer, TiledAdminMapLayer, TiledOSMapLayer, FeatureLayer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _HeatMapLayer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./HeatMapLayer */ \"./src/mapboxgl/layer/HeatMapLayer.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"HeatMapLayer\", function() { return _HeatMapLayer__WEBPACK_IMPORTED_MODULE_0__[\"HeatMapLayer\"]; });\n\n/* harmony import */ var _TiledMapLayer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TiledMapLayer */ \"./src/mapboxgl/layer/TiledMapLayer.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"TiledMapLayer\", function() { return _TiledMapLayer__WEBPACK_IMPORTED_MODULE_1__[\"TiledMapLayer\"]; });\n\n/* harmony import */ var _VectorTiledMapLayer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./VectorTiledMapLayer */ \"./src/mapboxgl/layer/VectorTiledMapLayer.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"VectorTiledMapLayer\", function() { return _VectorTiledMapLayer__WEBPACK_IMPORTED_MODULE_2__[\"VectorTiledMapLayer\"]; });\n\n/* harmony import */ var _TiledRoadMapLayer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./TiledRoadMapLayer */ \"./src/mapboxgl/layer/TiledRoadMapLayer.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"TiledRoadMapLayer\", function() { return _TiledRoadMapLayer__WEBPACK_IMPORTED_MODULE_3__[\"TiledRoadMapLayer\"]; });\n\n/* harmony import */ var _TiledAdminMapLayer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./TiledAdminMapLayer */ \"./src/mapboxgl/layer/TiledAdminMapLayer.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"TiledAdminMapLayer\", function() { return _TiledAdminMapLayer__WEBPACK_IMPORTED_MODULE_4__[\"TiledAdminMapLayer\"]; });\n\n/* harmony import */ var _TiledOSMapLayer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./TiledOSMapLayer */ \"./src/mapboxgl/layer/TiledOSMapLayer.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"TiledOSMapLayer\", function() { return _TiledOSMapLayer__WEBPACK_IMPORTED_MODULE_5__[\"TiledOSMapLayer\"]; });\n\n/* harmony import */ var _FeatureLayer__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./FeatureLayer */ \"./src/mapboxgl/layer/FeatureLayer.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"FeatureLayer\", function() { return _FeatureLayer__WEBPACK_IMPORTED_MODULE_6__[\"FeatureLayer\"]; });\n\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n//# sourceURL=webpack:///./src/mapboxgl/layer/index.js?");

/***/ }),

/***/ "./src/mapboxgl/services/FeatureService.js":
/*!*************************************************!*\
  !*** ./src/mapboxgl/services/FeatureService.js ***!
  \*************************************************/
/*! exports provided: FeatureService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FeatureService\", function() { return FeatureService; });\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mapbox-gl */ \"mapbox-gl\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mapbox_gl__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _core_Base__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/Base */ \"./src/mapboxgl/core/Base.js\");\n/* harmony import */ var _ServiceBase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ServiceBase */ \"./src/mapboxgl/services/ServiceBase.js\");\n/* harmony import */ var _core_Util__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/Util */ \"./src/mapboxgl/core/Util.js\");\n/* harmony import */ var _core_Parse__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../core/Parse */ \"./src/mapboxgl/core/Parse.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * @class mapboxgl.ekmap.FeatureService\r\n * @category  BaseType Service\r\n * @classdesc FeatureService.\r\n * @example\r\n * var featureService = new mapboxgl.ekmap.FeatureService({\r\n *      url : //The URL to the Feature Service\r\n * });\r\n * featureService.query(params,function(result){\r\n *     //doSomething\r\n * })\r\n * @extends {mapboxgl.ekmap.ServiceBase}\r\n * @param {object} options Construction parameters.\r\n * @param {string} [options.url]  (Required) The URL to the Feature Service.\r\n * @param {string} [options.token] - Will use this token to authenticate all calls to the service.\r\n */\r\nclass FeatureService extends _ServiceBase__WEBPACK_IMPORTED_MODULE_2__[\"ServiceBase\"] {\r\n    constructor(options) {\r\n        super(options);\r\n        if (options.url){\r\n            this.options = _core_Util__WEBPACK_IMPORTED_MODULE_3__[\"Util\"].getUrlParams(options);\r\n        }\r\n    }\r\n\r\n    nearby(lngLat, callback, context) {\r\n        var params = {};\r\n        params.geometry = [lngLat.lng, lngLat.lat];\r\n        params.geometryType = 'esriGeometryPoint';\r\n        params.spatialRel = 'esriSpatialRelIntersects';\r\n        params.units = 'esriSRUnit_Kilometer';\r\n        params.distance = 5;\r\n        params.inSr = 4326;\r\n        params.returnIdsOnly = true;\r\n        params.f = 'json';\r\n        var service = new FeatureService(this.options);\r\n        return service.request('query', params, function (error, response) {\r\n            callback.call(context, error, response, response);\r\n        }, this);\r\n    }\r\n\r\n    /**\r\n     * @function mapboxgl.ekmap.FeatureService.prototype.run\r\n     * @description  Executes the identify request with the current parameters, identified features will be passed to callback as a GeoJSON FeatureCollection. Accepts an optional function context.\r\n     * @returns {this}\r\n     */\r\n    run(callback, context) {\r\n        this._cleanParams();\r\n        var service = new FeatureService(this.options);\r\n        // services hosted on ArcGIS Online and ArcGIS Server 10.3.1+ support requesting geojson directly\r\n        if (this.options.isModern || isArcgisOnline(this.options.url)) {\r\n            this.params.f = 'geojson';\r\n\r\n            return service.request('query', params, function (error, response) {\r\n                this._trapSQLerrors(error);\r\n                callback.call(context, error, response, response);\r\n            }, this);\r\n\r\n            // otherwise convert it in the callback then pass it on\r\n        } else {\r\n            return service.request('query', params, function (error, response) {\r\n                this._trapSQLerrors(error);\r\n                callback.call(context, error, (response && responseToFeatureCollection(response)), response);\r\n            }, this);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @function mapboxgl.ekmap.FeatureService.prototype.addFeature\r\n     * @description Adds a new feature to the feature layer. this also adds the feature to the map if creation is successful.\r\n     * @param {GeoJSONObject} params GeoJSON of feature add (To change point color, set 'color' for options GeoJSON, the default is light blue ('#3FB1CE')).\r\n     * @param {Function} callback\r\n     * @param {Object} context\r\n     * @returns {this}\r\n     */\r\n    addFeature(params, callback, context) {\r\n        this.addFeatures(params, callback, context);\r\n    }\r\n\r\n    /**\r\n     * @private\r\n     * @function mapboxgl.ekmap.FeatureService.prototype.addFeatures\r\n     * @description Adds a new feature to the feature layer. this also adds the feature to the map if creation is successful.\r\n     * @param {GeoJSONObject} params GeoJSON of feature add (To change point color, set 'color' for options GeoJSON, the default is light blue ('#3FB1CE')).\r\n     * @param {Function} callback\r\n     * @param {Object} context\r\n     * @returns {this}\r\n     */\r\n    addFeatures(params, callback, context) {\r\n        var fea = _core_Parse__WEBPACK_IMPORTED_MODULE_4__[\"Parse\"].geojsonToArcGIS(params);\r\n        var data = [];\r\n        data.push(fea)\r\n        var dataPost = JSON.stringify(data)\r\n        var service = new FeatureService(this.options);\r\n        return service.post('addFeatures', dataPost, function (error, response) {\r\n            callback.call(context, error, response, response);\r\n        }, this);\r\n    }\r\n\r\n    /**\r\n    * @function mapboxgl.ekmap.FeatureService.prototype.updateFeature\r\n    * @description Update the provided feature on the Feature Layer. This also updates the feature on the map.\r\n    * @param {GeoJSONObject} params Infomation feature.\r\n    * @param {Function} callback The callback of result data returned by the server side.\r\n    * @param {Object} context\r\n    * @returns {this}\r\n    */\r\n    updateFeature(params, callback, context) {\r\n        this.updateFeatures(params, callback, context);\r\n    }\r\n\r\n    /**\r\n    * @private\r\n    * @function mapboxgl.ekmap.FeatureService.prototype.updateFeatures\r\n    * @description Update the provided feature on the Feature Layer. This also updates the feature on the map.\r\n    * @param {GeoJSONObject} params - Infomation feature.\r\n    */\r\n    updateFeatures(params, callback, context) {\r\n        var fea = _core_Parse__WEBPACK_IMPORTED_MODULE_4__[\"Parse\"].geojsonToArcGIS(params);\r\n        var data = [];\r\n        data.push(fea)\r\n        var dataPost = JSON.stringify(data)\r\n        var service = new FeatureService(this.options);\r\n        return service.post('updateFeatures', dataPost, function (error, response) {\r\n            callback.call(context, error, response, response);\r\n        }, this);\r\n    }\r\n\r\n    /**\r\n    * @function mapboxgl.ekmap.FeatureService.prototype.deleteFeature\r\n    * @description Remove the feature with the provided id from the feature layer. This will also remove the feature from the map if it exists.\r\n    * @param {Interger} id Id of feature.\r\n    * @param {Function} callback The callback of result data returned by the server side.\r\n    * @param {Object} context\r\n    * @returns {this}\r\n    */\r\n    deleteFeature(id, callback, context) {\r\n        this.deleteFeatures(id, callback, context);\r\n    }\r\n\r\n    /**\r\n    * @function mapboxgl.ekmap.FeatureService.prototype.deleteFeatures\r\n    * @description Removes an array of features with the provided ids from the feature layer. This will also remove the features from the map if they exist.\r\n    * @param {Integers} ids List id of features.\r\n    * @param {Function} callback The callback of result data returned by the server side.\r\n    * @param {Object} context\r\n    * @returns {this}\r\n    */\r\n    deleteFeatures(ids, callback, context) {\r\n        var service = new FeatureService(this.options);\r\n        return service.post('deleteFeatures', ids, function (error, response) {\r\n            callback.call(context, error, response, response);\r\n        }, this);\r\n    }\r\n\r\n    /**\r\n     * @function mapboxgl.ekmap.FeatureService.prototype.query\r\n     * @description Query data\r\n     * @param {Object} params - Adds the layer to the given map or layer group.\r\n     * @param {RequestCallback} callback\r\n     */\r\n    query(params, callback, context) {\r\n        var param = {};\r\n        param.where = params.where;\r\n        if (params.orderByFields)\r\n            param.orderByFields = params.orderByFields\r\n        if (params.geometry) {\r\n            var geom = params.geometry;\r\n            if (params.geometry.type == 'Point') {\r\n                param.geometryType = 'esriGeometryPoint'\r\n                param.geometry = {\r\n                    \"x\": geom.coordinates[0],\r\n                    \"y\": geom.coordinates[1],\r\n                    \"spatialReference\": { \"wkid\": 4326 }\r\n                }\r\n            }\r\n            if (params.geometry.type == 'Polygon') {\r\n                param.geometryType = 'esriGeometryPolygon';\r\n                param.geometry = {\r\n                    \"rings\": geom.coordinates,\r\n                    \"spatialReference\": { \"wkid\": 4326 }\r\n                }\r\n            }\r\n            if (params.geometry.type == 'LineString')\r\n                param.geometryType = 'esriGeometryPolyline'\r\n        }\r\n        param.outFields = '*';\r\n        param.f = 'geojson';\r\n        param.returnGeometry = true;\r\n        var service = new FeatureService(this.options);\r\n        return service.request('query', param, function (error, response) {\r\n            callback.call(context, error, response, response);\r\n        }, this);\r\n    }\r\n\r\n    /**\r\n     * @function mapboxgl.ekmap.FeatureService.prototype.queryByBound\r\n     * @description  is an abstraction for the find API included in Map Services. It provides a chainable API for building request parameters and executing find tasks.ã\r\n     * @param {mapboxgl.LngLatBounds} lngLatBounds\r\n     * @param {RequestCallback} callback\r\n     */\r\n    queryByBound(lngLatBounds, callback, context) {\r\n        var param = {};\r\n        var data = _core_Util__WEBPACK_IMPORTED_MODULE_3__[\"Util\"]._setGeometry(lngLatBounds);\r\n        param.f = 'geojson';\r\n        param.outFields = '*';\r\n        param.geometryType = data.geometryType;\r\n        param.geometry = data.geometry;\r\n        var service = new FeatureService(this.options);\r\n        return service.request('query', param, function (error, response) {\r\n            callback.call(context, error, response, response);\r\n        }, this);\r\n    }\r\n\r\n    /**\r\n     * @function mapboxgl.ekmap.FeatureService.prototype.queryByGeometry\r\n     * @description  is an abstraction for the find API included in Map Services. It provides a chainable API for building request parameters and executing find tasks.ã\r\n     * @param {Object} geometry The geometry to apply as the spatial filter. The structure of the geometry is the same as the structure of the JSON geometry objects returned by the ArcGIS REST API. In addition to the JSON structures, for envelopes and points, you can specify the geometry with a simpler comma-separated syntax.\r\n     * @param {RequestCallback} callback\r\n     */\r\n    queryByGeometry(params, callback, context) {\r\n        var param = {};\r\n        param.f = 'geojson';\r\n        param.outFields = '*';\r\n        if (params) {\r\n            var geom = params;\r\n            if (params.type == 'Point') {\r\n                param.geometryType = 'esriGeometryPoint'\r\n                param.geometry = {\r\n                    \"x\": geom.coordinates[0],\r\n                    \"y\": geom.coordinates[1],\r\n                    \"spatialReference\": { \"wkid\": 4326 }\r\n                }\r\n            }\r\n            if (params.type == 'Polygon') {\r\n                param.geometryType = 'esriGeometryPolygon';\r\n                param.geometry = {\r\n                    \"rings\": geom.coordinates,\r\n                    \"spatialReference\": { \"wkid\": 4326 }\r\n                }\r\n            }\r\n            if (params.type == 'LineString')\r\n                param.geometryType = 'esriGeometryPolyline'\r\n        }\r\n        var service = new FeatureService(this.options);\r\n        return service.request('query', param, function (error, response) {\r\n            callback.call(context, error, response, response);\r\n        }, this);\r\n    }\r\n\r\n    /**\r\n     * @function mapboxgl.ekmap.FeatureService.prototype.applyEdits\r\n     * @description This operation adds, updates, and deletes features to the associated feature layer.\r\n     * @param {Object} params Options.\r\n     * @param {GeoJSONObject} params.adds GeoJSON of feature add.\r\n     * @param {GeoJSONObject} params.updates GeoJSON of feature update.\r\n     * @param {Interger} params.deletes Id of feature delete.\r\n     * @param {RequestCallback} callback\r\n     */\r\n    applyEdits(params, callback, context) {\r\n        var param = {}\r\n        if (params.adds) {\r\n            var dataAdd = _core_Parse__WEBPACK_IMPORTED_MODULE_4__[\"Parse\"].geojsonToArcGIS(params.adds);\r\n            var arr1 = [];\r\n            arr1.push(dataAdd);\r\n            param.adds = JSON.stringify(arr1)\r\n        } else\r\n            param.adds = false;\r\n        if (params.updates) {\r\n            var dataUpdate = _core_Parse__WEBPACK_IMPORTED_MODULE_4__[\"Parse\"].geojsonToArcGIS(params.updates);\r\n            var arr2 = [];\r\n            arr2.push(dataUpdate);\r\n            param.updates = JSON.stringify(arr2)\r\n        } else\r\n            param.updates = false;\r\n        if (params.deletes)\r\n            param.deletes = params.deletes;\r\n        else\r\n            param.deletes = false;\r\n        var service = new FeatureService(this.options);\r\n        console.log(param)\r\n        return service.post('applyEdits', param, function (error, response) {\r\n            callback.call(context, error, response, response);\r\n        }, this);\r\n    }\r\n}\r\n\r\nmapbox_gl__WEBPACK_IMPORTED_MODULE_0___default.a.ekmap.FeatureService = FeatureService;\r\n\n\n//# sourceURL=webpack:///./src/mapboxgl/services/FeatureService.js?");

/***/ }),

/***/ "./src/mapboxgl/services/IdentifyFeatures.js":
/*!***************************************************!*\
  !*** ./src/mapboxgl/services/IdentifyFeatures.js ***!
  \***************************************************/
/*! exports provided: IdentifyFeatures */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"IdentifyFeatures\", function() { return IdentifyFeatures; });\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mapbox-gl */ \"mapbox-gl\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mapbox_gl__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _core_Base__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/Base */ \"./src/mapboxgl/core/Base.js\");\n/* harmony import */ var _ServiceBase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ServiceBase */ \"./src/mapboxgl/services/ServiceBase.js\");\n/* harmony import */ var _core_Util__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/Util */ \"./src/mapboxgl/core/Util.js\");\n\r\n\r\n\r\n\r\n\r\n/**\r\n * @class mapboxgl.ekmap.IdentifyFeatures\r\n * @category  BaseType Service\r\n * @classdesc  mapboxgl.ekmap.IdentifyFeatures is an abstraction for the Identify API found in Map Services. It provides a chainable API for building request parameters and executing the request.\r\n * @extends {mapboxgl.ekmap.ServiceBase}\r\n * @param {object} options Construction parameters.\r\n * @param {string} [options.url] URL of the ArcGIS service you would like to consume.\r\n * @param {string} [options.token] - Will use this token to authenticate all calls to the service.\r\n * @example\r\n * var map = new mapboxgl.Map({\r\n *      container: 'divMapId',\r\n *      center: [103.9, 22.2],\r\n *      zoom: 6\r\n * })\r\n * var identify = new mapboxgl.ekmap.IdentifyFeatures({\r\n *      url: 'http://s2.cloudgis.vn/arcgis/rest/services/GIS/DuongSat/MapServer'\r\n * })\r\n *   .on(map)\r\n *   .at([])\r\n *   .run(function (obj) {\r\n *      console.log();\r\n *   })\r\n *     //doSomething\r\n * })\r\n */\r\nclass IdentifyFeatures extends _ServiceBase__WEBPACK_IMPORTED_MODULE_2__[\"ServiceBase\"] {\r\n\r\n    constructor(options) {\r\n        super(options);\r\n        if (options.url)\r\n            this.options = _core_Util__WEBPACK_IMPORTED_MODULE_3__[\"Util\"].getUrlParams(options);\r\n        this.paramsIdentify = {\r\n            geometry: '',\r\n            sr: 4326,\r\n            layers: 'all',\r\n            tolerance: 6,\r\n            returnGeometry: true,\r\n            f: 'json'\r\n        };\r\n    }\r\n\r\n    /**\r\n     * @function mapboxgl.ekmap.IdentifyFeatures.prototype.on\r\n     * @description  The map to identify features on.\r\n     * @param {mapboxgl.Map} map The map is defined.\r\n     * @returns {this}\r\n     */\r\n    on(map) {\r\n        var bounds = new mapbox_gl__WEBPACK_IMPORTED_MODULE_0___default.a.LngLatBounds(map.getBounds()._sw, map.getBounds()._ne);\r\n        var extent = {\r\n            'xmin': bounds.getSouthWest().lng,\r\n            'ymin': bounds.getSouthWest().lat,\r\n            'xmax': bounds.getNorthEast().lng,\r\n            'ymax': bounds.getNorthEast().lat,\r\n            'spatialReference': {\r\n                'wkid': 4326\r\n            }\r\n        };\r\n        var size = map.getContainer()\r\n        this.paramsIdentify.imageDisplay = [size.clientWidth, size.clientHeight, 96];\r\n        this.paramsIdentify.mapExtent = [extent.xmin, extent.ymin, extent.xmax, extent.ymax];\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * @function mapboxgl.ekmap.IdentifyFeatures.prototype.at\r\n     * @description  Identifies features at a given {@link https://docs.mapbox.com/mapbox-gl-js/api/geography/#lnglatbounds|mapboxgl.LatLngBounds} or a valid GeoJSON object literal.\r\n     * @returns {this}\r\n     */\r\n    at(geometry) {\r\n        if (geometry.length === 2)\r\n            geometry = new mapbox_gl__WEBPACK_IMPORTED_MODULE_0___default.a.LngLat(geometry);\r\n        this._setGeometryParams(geometry);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * @function mapboxgl.ekmap.IdentifyFeatures.prototype.run\r\n     * @description  Executes the identify request with the current parameters, identified features will be passed to callback as a GeoJSON FeatureCollection. Accepts an optional function context.\r\n     * @returns {this}\r\n     */\r\n    run(callback, context) {\r\n        var service = new IdentifyFeatures(this.options);\r\n        return service.request('identify', this.paramsIdentify, function (error, response) {\r\n            // immediately invoke with an error\r\n            callback.call(context, error, response, response);\r\n        }, this);\r\n    }\r\n\r\n    /**\r\n     * @private\r\n     * @function mapboxgl.ekmap.IdentifyFeatures.prototype._setGeometryParams\r\n     * @description Set geometry params.\r\n     */\r\n    _setGeometryParams(geometry) {\r\n        var converted = _core_Util__WEBPACK_IMPORTED_MODULE_3__[\"Util\"]._setGeometry(geometry);\r\n        this.paramsIdentify.geometry = converted.geometry;\r\n        this.paramsIdentify.geometryType = converted.geometryType;\r\n    }\r\n}\r\n\r\nmapbox_gl__WEBPACK_IMPORTED_MODULE_0___default.a.ekmap.IdentifyFeatures = IdentifyFeatures;\r\n\n\n//# sourceURL=webpack:///./src/mapboxgl/services/IdentifyFeatures.js?");

/***/ }),

/***/ "./src/mapboxgl/services/MapService.js":
/*!*********************************************!*\
  !*** ./src/mapboxgl/services/MapService.js ***!
  \*********************************************/
/*! exports provided: MapService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MapService\", function() { return MapService; });\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mapbox-gl */ \"mapbox-gl\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mapbox_gl__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _core_Base__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/Base */ \"./src/mapboxgl/core/Base.js\");\n/* harmony import */ var _ServiceBase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ServiceBase */ \"./src/mapboxgl/services/ServiceBase.js\");\n/* harmony import */ var _core_Util__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/Util */ \"./src/mapboxgl/core/Util.js\");\n\r\n\r\n\r\n\r\n\r\n/**\r\n * @class mapboxgl.ekmap.MapService\r\n * @category  BaseType Service\r\n * @classdesc The MapService class.\r\n * @extends {mapboxgl.ekmap.ServiceBase}\r\n * @param {object} options Construction parameters.\r\n * @param {string} options.url (Required) The URL to the MapService.\r\n * @param {string} options.token Will use this token to authenticate all calls to the service.\r\n * @example\r\n * var mapService = new mapboxgl.ekmap.MapService({\r\n *      url: //The URL to the MapService\r\n * });\r\n * mapService.identify(function(result){\r\n *     //doSomething\r\n * })\r\n */\r\nclass MapService extends _ServiceBase__WEBPACK_IMPORTED_MODULE_2__[\"ServiceBase\"] {\r\n\r\n    constructor(options) {\r\n        super(options);\r\n        this.options = _core_Util__WEBPACK_IMPORTED_MODULE_3__[\"Util\"].getUrlParams(options);\r\n        this.paramsIdentify = {\r\n            geometry: '',\r\n            sr: 4326,\r\n            layers: 'all',\r\n            tolerance: 3,\r\n            returnGeometry: true\r\n        };\r\n    }\r\n\r\n    /**\r\n     * @function mapboxgl.ekmap.MapService.prototype.identify\r\n     * @description Returns a new mapboxgl.ekmap.IdentifyFeatures object that can be used to identify features contained within this service.\r\n     */\r\n    identify() {\r\n        return new mapbox_gl__WEBPACK_IMPORTED_MODULE_0___default.a.ekmap.IdentifyFeatures(this.options);\r\n    }\r\n\r\n    /**\r\n     * @function mapboxgl.ekmap.MapService.prototype.find\r\n     * @description  Is an abstraction for the find API included in Map Services. It provides a chainable API for building request parameters and executing find tasks.\r\n     * @param {Object} params\r\n     * @param {string} params.f=json The response format. The default response format is html.\r\n     * @param {string} params.searchText (Required) The search string. This is the text that is searched across the layers and fields the user specifies.\r\n     * @param {RequestCallback} callback The callback of result data returned by the server side.\r\n     */\r\n    find(params, callback, context) {\r\n        var me = this;\r\n        this.legend(function (obj) {\r\n            var layers = [];\r\n            var list = obj.layers;\r\n            list.forEach(layer => {\r\n                layers.push(layer.layerId);\r\n            })\r\n            var param = {};\r\n            param.searchText = params.searchText;\r\n            param.layers = layers.toString();\r\n            param.f = 'json';\r\n            var service = new MapService(me.options);\r\n            return service.request('find', param, function (error, response) {\r\n                callback.call(context, error, response, response);\r\n            }, me);\r\n        })\r\n       \r\n    }\r\n\r\n    /**\r\n     * @function mapboxgl.ekmap.MapService.prototype.query\r\n     * @description  Is an abstraction for the find API included in Map Services. It provides a chainable API for building request parameters and executing find tasks.ã\r\n     * @param {Object} params\r\n     * @param {string} params.f=json The response format. The default response format is json.\r\n     * @param {string} params.where A WHERE clause for the query filter. Any legal SQL WHERE clause operating on the fields in the layer is allowed.\r\n     * @param {string} params.text A literal search text. If the layer has a display field associated with it, the server searches for this text in this field. This parameter is shorthand for a WHERE clause of where <displayField> like '%<text>%'. The text is case sensitive. This parameter is ignored if the WHERE parameter is specified.\r\n     * @param {RequestCallback} callback The callback of result data returned by the server side.\r\n     */\r\n    query(params, callback, context) {\r\n        var param = {};\r\n        param.where = params.where;\r\n        param.text = params.text;\r\n        param.objectIds = params.objectId;\r\n        param.f = 'json';\r\n        var service = new MapService(this.options);\r\n        return service.request('query', param, function (error, response) {\r\n            callback.call(context, error, response, response);\r\n        }, this);\r\n    }\r\n\r\n    /**\r\n     * @function mapboxgl.ekmap.MapService.prototype.getLayers\r\n     * @description  Get list layer on map. \r\n     * @param {RequestCallback} callback The callback of result data returned by the server side.\r\n     */\r\n    getLayers(callback, context) {\r\n        var params = {};\r\n        params.f = 'pjson';\r\n        var service = new MapService(this.options);\r\n        return service.request('layers', params, function (error, response) {\r\n            callback.call(context, error, response, response);\r\n        }, this);\r\n    }\r\n\r\n    /**\r\n     * @function mapboxgl.ekmap.MapService.prototype.legend\r\n     * @description  Get legend on map.\r\n     * @param {RequestCallback} callback The callback of result data returned by the server side.\r\n     */\r\n    legend(callback, context) {\r\n        var params = {};\r\n        params.f = 'json';\r\n        var service = new MapService(this.options);\r\n        return service.request('legend', params, function (error, response) {\r\n            callback.call(context, error, response, response);\r\n        }, this);\r\n    }\r\n\r\n    /**\r\n     * @function mapboxgl.ekmap.MapService.prototype.queryByBound\r\n     * @description  Is an abstraction for the find API included in Map Services. It provides a chainable API for building request parameters and executing find tasks.ã\r\n     * @param {mapboxgl.LngLatBounds} lngLatBounds\r\n     * @param {RequestCallback} callback The callback of result data returned by the server side.\r\n     */\r\n    queryByBound(params, callback, context) {\r\n        var param = {};\r\n        var data = _core_Util__WEBPACK_IMPORTED_MODULE_3__[\"Util\"]._setGeometry(params);\r\n        param.f = 'geojson';\r\n        param.geometryType = data.geometryType;\r\n        param.geometry = data.geometry;\r\n        var service = new MapService(this.options);\r\n        return service.request('query', param, function (error, response) {\r\n            callback.call(context, error, response, response);\r\n        }, this);\r\n    }\r\n\r\n    /**\r\n     * @function mapboxgl.ekmap.MapService.prototype.queryByGeometry\r\n     * @description  Is an abstraction for the find API included in Map Services. It provides a chainable API for building request parameters and executing find tasks.ã\r\n     * @param {Object} geometry The geometry to apply as the spatial filter. The structure of the geometry is the same as the structure of the JSON geometry objects returned by the ArcGIS REST API. In addition to the JSON structures, for envelopes and points, you can specify the geometry with a simpler comma-separated syntax.\r\n     * @param {RequestCallback} callback The callback of result data returned by the server side.\r\n     */\r\n    queryByGeometry(params, callback, context) {\r\n        var param = {};\r\n        param.f = 'geojson';\r\n        if (params) {\r\n            var geom = params;\r\n            if (params.type == 'Point') {\r\n                param.geometryType = 'esriGeometryPoint'\r\n                param.geometry = {\r\n                    \"x\": geom.coordinates[0],\r\n                    \"y\": geom.coordinates[1],\r\n                    \"spatialReference\": { \"wkid\": 4326 }\r\n                }\r\n            }\r\n            if (params.type == 'Polygon') {\r\n                param.geometryType = 'esriGeometryPolygon';\r\n                param.geometry = {\r\n                    \"rings\": geom.coordinates,\r\n                    \"spatialReference\": { \"wkid\": 4326 }\r\n                }\r\n            }\r\n            if (params.type == 'LineString')\r\n                param.geometryType = 'esriGeometryPolyline'\r\n        }\r\n        var service = new MapService(this.options);\r\n        return service.request('query', param, function (error, response) {\r\n            callback.call(context, error, response, response);\r\n        }, this);\r\n    }\r\n}\r\n\r\nmapbox_gl__WEBPACK_IMPORTED_MODULE_0___default.a.ekmap.MapService = MapService;\r\n\n\n//# sourceURL=webpack:///./src/mapboxgl/services/MapService.js?");

/***/ }),

/***/ "./src/mapboxgl/services/ServiceBase.js":
/*!**********************************************!*\
  !*** ./src/mapboxgl/services/ServiceBase.js ***!
  \**********************************************/
/*! exports provided: ServiceBase */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ServiceBase\", function() { return ServiceBase; });\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mapbox-gl */ \"mapbox-gl\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mapbox_gl__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _core_Base__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/Base */ \"./src/mapboxgl/core/Base.js\");\n/* harmony import */ var _core_Util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/Util */ \"./src/mapboxgl/core/Util.js\");\n/* harmony import */ var _core_Request__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/Request */ \"./src/mapboxgl/core/Request.js\");\n\r\n\r\n\r\n\r\n\r\n/**\r\n * @class mapboxgl.ekmap.ServiceBase\r\n * @category  BaseType Service\r\n * @description mapboxgl.ekmap base class.\r\n * @param {Object} options The optional parameters.\r\n * @param {string} [options.url] (Required) The URL to the MapService.\r\n * @param {string} [options.token] - Will use this token to authenticate all calls to the service.\r\n */\r\nclass ServiceBase extends mapbox_gl__WEBPACK_IMPORTED_MODULE_0___default.a.Evented {\r\n\r\n    constructor(options) {\r\n        super(options);\r\n        this.options = _core_Util__WEBPACK_IMPORTED_MODULE_2__[\"Util\"].getUrlParams(options);\r\n        this.url = this.options.url;\r\n        /**\r\n         * @event mapboxgl.ekmap.ServiceBase#initialized\r\n         * @description .\r\n         * @property {Object} this this .\r\n         */\r\n        this.fire('initialized', this);\r\n    }\r\n\r\n    request(path, params, callback, context) {\r\n        return this._request(path, params, callback, context);\r\n    }\r\n\r\n    _request(path, params, callback, context) {\r\n        this.fire('requeststart', {\r\n            url: this.url + path,\r\n            params: params,\r\n        }, true);\r\n        if (this.options.token) {\r\n            params.token = this.options.token;\r\n        }\r\n        if (this.options.requestParams) {\r\n            _core_Util__WEBPACK_IMPORTED_MODULE_2__[\"Util\"].extend(params, this.options.requestParams);\r\n        }\r\n        if (this._authenticating) {\r\n            return;\r\n        } else {\r\n            var url = this.url + path;\r\n            return _core_Request__WEBPACK_IMPORTED_MODULE_3__[\"Request\"].send(url + '?' + _core_Util__WEBPACK_IMPORTED_MODULE_2__[\"Util\"].serialize(params), \"\", {}, callback);\r\n        }\r\n    }\r\n\r\n    post(path, dataPost, callback, context) {\r\n        return this._post(path, dataPost, callback, context);\r\n    }\r\n\r\n    _post(path, dataPost, callback, context) {\r\n        this.fire('poststart', {\r\n            url: this.url + path,\r\n            dataPost: dataPost,\r\n        }, true);\r\n        if (this.options.requestParams) {\r\n            _core_Util__WEBPACK_IMPORTED_MODULE_2__[\"Util\"].extend(dataPost, this.options.requestParams);\r\n        }\r\n        var data = {};\r\n        if (this.options.token) {\r\n            data.token = this.options.token;\r\n        }\r\n        if (this._authenticating) {\r\n            this._requestQueue.push([method, path, dataPost, callback, context]);\r\n            return;\r\n        } else {\r\n            var url = this.url + path;\r\n            return _core_Request__WEBPACK_IMPORTED_MODULE_3__[\"Request\"].post(url + '?' + _core_Util__WEBPACK_IMPORTED_MODULE_2__[\"Util\"].serialize(data), dataPost, this.options, callback);\r\n        }\r\n    }\r\n\r\n    _createServiceCallback(method, path, params, callback, context) {\r\n        return _core_Util__WEBPACK_IMPORTED_MODULE_2__[\"Util\"].bind(function (error, response) {\r\n            if (error && (error.code === 499 || error.code === 498)) {\r\n                this._authenticating = true;\r\n\r\n                this._requestQueue.push([method, path, params, callback, context]);\r\n\r\n                // fire an event for users to handle and re-authenticate\r\n                this.fire('authenticationrequired', {\r\n                    authenticate: _core_Util__WEBPACK_IMPORTED_MODULE_2__[\"Util\"].bind(this.authenticate, this)\r\n                }, true);\r\n\r\n                // if the user has access to a callback they can handle the auth error\r\n                error.authenticate = _core_Util__WEBPACK_IMPORTED_MODULE_2__[\"Util\"].bind(this.authenticate, this);\r\n            }\r\n\r\n            callback.call(context, error, response);\r\n\r\n            if (error) {\r\n                this.fire('requesterror', {\r\n                    url: this.options.url + path,\r\n                    params: params,\r\n                    message: error.message,\r\n                    code: error.code,\r\n                    method: method\r\n                }, true);\r\n            } else {\r\n                this.fire('requestsuccess', {\r\n                    url: this.options.url + path,\r\n                    params: params,\r\n                    response: response,\r\n                    method: method\r\n                }, true);\r\n            }\r\n\r\n            this.fire('requestend', {\r\n                url: this.options.url + path,\r\n                params: params,\r\n                method: method\r\n            }, true);\r\n        }, this);\r\n    }\r\n}\r\n\r\nmapbox_gl__WEBPACK_IMPORTED_MODULE_0___default.a.ekmap.ServiceBase = ServiceBase;\r\n\n\n//# sourceURL=webpack:///./src/mapboxgl/services/ServiceBase.js?");

/***/ }),

/***/ "./src/mapboxgl/services/index.js":
/*!****************************************!*\
  !*** ./src/mapboxgl/services/index.js ***!
  \****************************************/
/*! exports provided: FeatureService, MapService, ServiceBase, IdentifyFeatures */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _FeatureService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./FeatureService */ \"./src/mapboxgl/services/FeatureService.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"FeatureService\", function() { return _FeatureService__WEBPACK_IMPORTED_MODULE_0__[\"FeatureService\"]; });\n\n/* harmony import */ var _MapService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MapService */ \"./src/mapboxgl/services/MapService.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"MapService\", function() { return _MapService__WEBPACK_IMPORTED_MODULE_1__[\"MapService\"]; });\n\n/* harmony import */ var _ServiceBase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ServiceBase */ \"./src/mapboxgl/services/ServiceBase.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"ServiceBase\", function() { return _ServiceBase__WEBPACK_IMPORTED_MODULE_2__[\"ServiceBase\"]; });\n\n/* harmony import */ var _IdentifyFeatures__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./IdentifyFeatures */ \"./src/mapboxgl/services/IdentifyFeatures.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"IdentifyFeatures\", function() { return _IdentifyFeatures__WEBPACK_IMPORTED_MODULE_3__[\"IdentifyFeatures\"]; });\n\n\r\n\r\n\r\n\r\n\n\n//# sourceURL=webpack:///./src/mapboxgl/services/index.js?");

/***/ }),

/***/ 0:
/*!*****************************************************************!*\
  !*** multi ./src/mapboxgl/index.js ./src/mapboxgl/css/index.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("__webpack_require__(/*! D:\\dev\\GSV40\\VieGISClient\\eKMapClient\\eKMap-Client\\src\\mapboxgl\\index.js */\"./src/mapboxgl/index.js\");\nmodule.exports = __webpack_require__(/*! D:\\dev\\GSV40\\VieGISClient\\eKMapClient\\eKMap-Client\\src\\mapboxgl\\css\\index.js */\"./src/mapboxgl/css/index.js\");\n\n\n//# sourceURL=webpack:///multi_./src/mapboxgl/index.js_./src/mapboxgl/css/index.js?");

/***/ }),

/***/ "mapbox-gl":
/*!***************************!*\
  !*** external "mapboxgl" ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = mapboxgl;\n\n//# sourceURL=webpack:///external_%22mapboxgl%22?");

/***/ })

/******/ });